create extension if not exists "isn" with schema "extensions";

create schema if not exists "authentication";

create extension if not exists "unaccent" with schema "public";

create type "authentication"."color_scheme" as enum ('system', 'light', 'dark');

create type "authentication"."pkce_challenge_method" as enum ('S256');

create type "authentication"."user_role" as enum ('admin', 'adult', 'child', 'guest');

create type "authentication"."webauthn_transport" as enum ('usb', 'nfc', 'ble', 'smart-card', 'hybrid', 'internal', 'cable');

create type "public"."contribution_role" as enum ('abr', 'acp', 'act', 'adi', 'adp', 'aft', 'anc', 'anl', 'anm', 'ann', 'ant', 'ape', 'apl', 'app', 'aqt', 'arc', 'ard', 'arr', 'art', 'asg', 'asn', 'ato', 'att', 'auc', 'aud', 'aue', 'aui', 'aup', 'aus', 'aut', 'bdd', 'bjd', 'bka', 'bkd', 'bkp', 'blw', 'bnd', 'bpd', 'brd', 'brl', 'bsl', 'cad', 'cas', 'ccp', 'chr', 'cli', 'cll', 'clr', 'clt', 'cmm', 'cmp', 'cmt', 'cnd', 'cng', 'cns', 'coe', 'col', 'com', 'con', 'cop', 'cor', 'cos', 'cot', 'cou', 'cov', 'cpc', 'cpe', 'cph', 'cpl', 'cpt', 'cre', 'crp', 'crr', 'crt', 'csl', 'csp', 'cst', 'ctb', 'cte', 'ctg', 'ctr', 'cts', 'ctt', 'cur', 'cwt', 'dbd', 'dbp', 'dfd', 'dfe', 'dft', 'dgc', 'dgg', 'dgs', 'dis', 'djo', 'dln', 'dnc', 'dnr', 'dpc', 'dpt', 'drm', 'drt', 'dsr', 'dst', 'dtc', 'dte', 'dtm', 'dto', 'dub', 'edc', 'edd', 'edm', 'edt', 'egr', 'elg', 'elt', 'eng', 'enj', 'etr', 'evp', 'exp', 'fac', 'fds', 'fld', 'flm', 'fmd', 'fmk', 'fmo', 'fmp', 'fnd', 'fon', 'fpy', 'frg', 'gdv', 'gis', 'his', 'hnr', 'hst', 'ill', 'ilu', 'ins', 'inv', 'isb', 'itr', 'ive', 'ivr', 'jud', 'jug', 'lbr', 'lbt', 'ldr', 'led', 'lee', 'lel', 'len', 'let', 'lgd', 'lie', 'lil', 'lit', 'lsa', 'lse', 'lso', 'ltg', 'ltr', 'lyr', 'mcp', 'mdc', 'med', 'mfp', 'mfr', 'mka', 'mod', 'mon', 'mrb', 'mrk', 'msd', 'mte', 'mtk', 'mup', 'mus', 'mxe', 'nan', 'nrt', 'onp', 'opn', 'org', 'orm', 'osp', 'oth', 'own', 'pad', 'pan', 'pat', 'pbd', 'pbl', 'pdr', 'pfr', 'pht', 'plt', 'pma', 'pmn', 'pop', 'ppm', 'ppt', 'pra', 'prc', 'prd', 'pre', 'prf', 'prg', 'prm', 'prn', 'pro', 'prp', 'prs', 'prt', 'prv', 'pta', 'pte', 'ptf', 'pth', 'ptt', 'pup', 'rap', 'rbr', 'rcd', 'rce', 'rcp', 'rdd', 'red', 'ren', 'res', 'rev', 'rpc', 'rps', 'rpt', 'rpy', 'rse', 'rsg', 'rsp', 'rsr', 'rst', 'rth', 'rtm', 'rxa', 'sad', 'sce', 'scl', 'scr', 'sde', 'sds', 'sec', 'sfx', 'sgd', 'sgn', 'sht', 'sll', 'sng', 'spk', 'spn', 'spy', 'srv', 'std', 'stg', 'stl', 'stm', 'stn', 'str', 'swd', 'tau', 'tcd', 'tch', 'ths', 'tld', 'tlg', 'tlh', 'tlp', 'trc', 'trl', 'tyd', 'tyg', 'uvp', 'vac', 'vdg', 'vfx', 'wac', 'wal', 'wam', 'wat', 'wdc', 'wde', 'wfs', 'wft', 'win', 'wit', 'wpr', 'wst', 'wts');

create type "public"."language_type" as enum ('living', 'historical', 'extinct', 'constructed', 'special');

create type "public"."rgb_color" as ("r" integer, "g" integer, "b" integer);


  create table "authentication"."access_token" (
    "id" bigint generated by default as identity not null,
    "user_id" bigint,
    "client_id" text not null,
    "scopes" text[] not null,
    "revoked_at" timestamp with time zone,
    "expires_at" timestamp with time zone not null,
    "created_at" timestamp with time zone not null default now(),
    "token" text not null
      );


alter table "authentication"."access_token" enable row level security;


  create table "authentication"."authenticator" (
    "id" bigint generated by default as identity not null,
    "handle" text,
    "agent" text,
    "type" text,
    "public_key" text not null,
    "identifier" character varying not null,
    "device_type" text not null,
    "transports" authentication.webauthn_transport[] not null,
    "counter" bigint not null default '0'::bigint,
    "backed_up" boolean not null default false,
    "created_at" timestamp with time zone not null default now(),
    "updated_at" timestamp with time zone,
    "last_used_at" timestamp with time zone,
    "user_id" bigint not null
      );


alter table "authentication"."authenticator" enable row level security;


  create table "authentication"."authorization_code" (
    "id" bigint generated by default as identity not null,
    "code" text not null,
    "client_id" text not null,
    "user_id" bigint not null,
    "scopes" text[] not null,
    "used_at" timestamp with time zone,
    "revoked" boolean not null default false,
    "expires_at" timestamp with time zone not null,
    "created_at" timestamp with time zone not null default now(),
    "redirect_uri" text not null,
    "challenge" text not null,
    "challenge_method" authentication.pkce_challenge_method not null default 'S256'::authentication.pkce_challenge_method
      );


alter table "authentication"."authorization_code" enable row level security;


  create table "authentication"."authorization_request" (
    "id" bigint generated by default as identity not null,
    "identifier" uuid not null default gen_random_uuid(),
    "client_id" text not null,
    "response_type" text not null,
    "redirect_uri" text not null,
    "scopes" text[],
    "state" text,
    "code_challenge" text not null,
    "code_challenge_method" text not null,
    "created_at" timestamp with time zone not null default now(),
    "expires_at" timestamp with time zone not null,
    "used_at" timestamp with time zone
      );


alter table "authentication"."authorization_request" enable row level security;


  create table "authentication"."challenge" (
    "id" bigint generated by default as identity not null,
    "challenge" text not null,
    "session_identifier" text not null,
    "created_at" timestamp with time zone not null default now(),
    "expires_at" timestamp with time zone not null
      );


alter table "authentication"."challenge" enable row level security;


  create table "authentication"."client" (
    "id" text not null,
    "redirect_uris" text[],
    "secret" text,
    "name" text,
    "description" text,
    "user_id" bigint,
    "created_at" timestamp with time zone not null default now(),
    "updated_at" timestamp with time zone,
    "personal" boolean not null default false,
    "revoked" boolean not null default false,
    "active" boolean not null default true
      );


alter table "authentication"."client" enable row level security;


  create table "authentication"."client_scope" (
    "client_id" text not null,
    "scope_id" text not null
      );


alter table "authentication"."client_scope" enable row level security;


  create table "authentication"."device_challenge" (
    "id" bigint generated by default as identity not null,
    "user_code" text not null,
    "device_code" text not null,
    "client_id" text not null,
    "approved" boolean,
    "last_poll_at" timestamp with time zone,
    "expires_at" timestamp with time zone not null,
    "created_at" timestamp with time zone not null default now(),
    "scopes" text[],
    "used_at" timestamp with time zone
      );


alter table "authentication"."device_challenge" enable row level security;


  create table "authentication"."passcode" (
    "id" bigint generated by default as identity not null,
    "created_at" timestamp with time zone not null default now(),
    "expires_at" timestamp with time zone not null,
    "code" character varying not null,
    "user_id" bigint not null
      );


alter table "authentication"."passcode" enable row level security;


  create table "authentication"."refresh_token" (
    "id" bigint generated by default as identity not null,
    "token" text not null,
    "user_id" bigint,
    "client_id" text not null,
    "scopes" text[] not null,
    "revoked_at" timestamp with time zone,
    "expires_at" timestamp with time zone not null,
    "created_at" timestamp with time zone not null default now()
      );


alter table "authentication"."refresh_token" enable row level security;


  create table "authentication"."scope" (
    "id" text not null,
    "description" text,
    "created_at" timestamp with time zone not null default now(),
    "server" boolean not null default false
      );


alter table "authentication"."scope" enable row level security;


  create table "authentication"."user" (
    "id" bigint generated by default as identity not null,
    "created_at" timestamp with time zone not null default now(),
    "updated_at" timestamp with time zone,
    "name" character varying,
    "email" character varying not null,
    "verified" boolean not null default false,
    "birthdate" date,
    "role" authentication.user_role not null default 'adult'::authentication.user_role,
    "color_scheme" authentication.color_scheme default 'system'::authentication.color_scheme
      );


alter table "authentication"."user" enable row level security;


  create table "authentication"."user_consent" (
    "user_id" bigint generated by default as identity not null,
    "client_id" text not null,
    "granted_at" timestamp with time zone not null default now(),
    "expires_at" timestamp with time zone not null,
    "revoked_at" timestamp with time zone,
    "scopes" text[] not null
      );


alter table "authentication"."user_consent" enable row level security;


  create table "public"."asset" (
    "id" bigint generated by default as identity not null,
    "created_at" timestamp with time zone not null default now(),
    "updated_at" timestamp with time zone,
    "storage_reference" text not null,
    "edition_id" bigint not null,
    "filename" text not null,
    "checksum" bytea not null,
    "size" integer not null,
    "media_type" text not null,
    "metadata" jsonb not null default '{}'::jsonb,
    "updated_by" bigint,
    "created_by" bigint
      );


alter table "public"."asset" enable row level security;


  create table "public"."catalog" (
    "id" bigint generated by default as identity not null,
    "feed_url" text not null,
    "title" text,
    "description" text,
    "image_url" text,
    "url" text,
    "updated_by" bigint,
    "updated_at" timestamp with time zone,
    "created_at" timestamp with time zone not null default now(),
    "age_requirement" smallint not null default '0'::smallint,
    "active" boolean not null default true,
    "color" public.rgb_color,
    "credentials_required" boolean not null default false
      );


alter table "public"."catalog" enable row level security;


  create table "public"."collection" (
    "id" bigint generated by default as identity not null,
    "name" text not null,
    "color" bytea,
    "icon" text,
    "description" text,
    "age_requirement" smallint not null default '0'::smallint,
    "shared" boolean,
    "like_count" integer not null default 0,
    "updated_by" bigint,
    "updated_at" timestamp with time zone,
    "created_by" bigint,
    "created_at" timestamp with time zone not null default now(),
    "search_vector" tsvector generated always as ((setweight(to_tsvector('simple'::regconfig, COALESCE(name, ''::text)), 'A'::"char") || setweight(to_tsvector('simple'::regconfig, COALESCE(description, ''::text)), 'B'::"char"))) stored
      );


alter table "public"."collection" enable row level security;


  create table "public"."collection_comment" (
    "collection_id" bigint generated by default as identity not null,
    "comment_id" bigint not null
      );


alter table "public"."collection_comment" enable row level security;


  create table "public"."collection_entry" (
    "collection_id" bigint not null,
    "work_id" bigint not null,
    "edition_id" bigint not null,
    "position" integer not null,
    "updated_by" bigint,
    "updated_at" timestamp with time zone,
    "created_by" bigint,
    "created_at" timestamp with time zone not null default now()
      );


alter table "public"."collection_entry" enable row level security;


  create table "public"."collection_tag" (
    "collection_id" bigint generated by default as identity not null,
    "tag_id" bigint not null
      );


alter table "public"."collection_tag" enable row level security;


  create table "public"."comment" (
    "id" bigint generated by default as identity not null,
    "content" text not null,
    "updated_at" timestamp with time zone,
    "created_by" bigint,
    "created_at" timestamp with time zone not null default now(),
    "parent_comment_id" bigint,
    "hidden_at" timestamp with time zone,
    "hidden_by" bigint,
    "hidden_reason" text
      );


alter table "public"."comment" enable row level security;


  create table "public"."comment_reaction" (
    "comment_id" bigint not null,
    "user_id" bigint not null,
    "emoji" text not null,
    "created_at" timestamp with time zone not null default now()
      );


alter table "public"."comment_reaction" enable row level security;


  create table "public"."comment_report" (
    "id" bigint generated by default as identity not null,
    "comment_id" bigint not null,
    "reported_by" bigint not null,
    "reason" text not null,
    "created_at" timestamp with time zone not null default now(),
    "resolved_at" timestamp with time zone,
    "resolved_by" bigint,
    "resolution" text
      );


alter table "public"."comment_report" enable row level security;


  create table "public"."contribution" (
    "creator_id" bigint not null,
    "edition_id" bigint not null,
    "role" public.contribution_role not null default 'aut'::public.contribution_role,
    "essential" boolean not null default true
      );


alter table "public"."contribution" enable row level security;


  create table "public"."creator" (
    "id" bigint generated by default as identity not null,
    "name" text not null,
    "sorting_key" text,
    "description" text,
    "url" text,
    "wikipedia_url" text,
    "goodreads_id" text,
    "amazon_id" text,
    "patreon_id" text,
    "openlibrary_id" text,
    "image_id" bigint,
    "birth_date" date,
    "death_date" date,
    "updated_by" bigint,
    "created_at" timestamp with time zone not null default now(),
    "updated_at" timestamp with time zone,
    "search_vector" tsvector generated always as ((setweight(to_tsvector('simple'::regconfig, COALESCE(name, ''::text)), 'A'::"char") || setweight(to_tsvector('simple'::regconfig, COALESCE(description, ''::text)), 'B'::"char"))) stored
      );


alter table "public"."creator" enable row level security;


  create table "public"."creator_comment" (
    "creator_id" bigint generated by default as identity not null,
    "comment_id" bigint not null
      );


alter table "public"."creator_comment" enable row level security;


  create table "public"."edition" (
    "id" bigint generated by default as identity not null,
    "work_id" bigint,
    "format" text,
    "title" text not null,
    "binding" text,
    "synopsis" text,
    "excerpt" text,
    "pages" smallint,
    "isbn_10" extensions.isbn,
    "isbn_13" extensions.isbn13,
    "asin" character(10),
    "openlibrary_id" text,
    "publisher_id" bigint,
    "published_at" date,
    "updated_by" bigint,
    "updated_at" timestamp with time zone,
    "created_at" timestamp with time zone not null default now(),
    "language" bpchar,
    "sorting_key" text,
    "cover_image_id" bigint,
    "legal_information" text,
    "search_vector" tsvector generated always as ((setweight(to_tsvector('simple'::regconfig, COALESCE(title, ''::text)), 'A'::"char") || setweight(to_tsvector('simple'::regconfig, COALESCE(synopsis, ''::text)), 'B'::"char"))) stored
      );


alter table "public"."edition" enable row level security;


  create table "public"."image" (
    "id" bigint generated by default as identity not null,
    "storage_reference" text not null,
    "filename" text not null,
    "description" text,
    "media_type" text not null,
    "width" smallint not null,
    "height" smallint not null,
    "size" integer not null,
    "metadata" jsonb not null default '{}'::jsonb,
    "updated_by" bigint,
    "updated_at" timestamp with time zone,
    "created_by" bigint,
    "created_at" timestamp with time zone not null default now(),
    "checksum" bytea not null,
    "blurhash" text not null
      );


alter table "public"."image" enable row level security;


  create table "public"."image_creator" (
    "image_id" bigint generated by default as identity not null,
    "creator_id" bigint not null,
    "essential" boolean not null default true
      );


alter table "public"."image_creator" enable row level security;


  create table "public"."language" (
    "iso_639_3" character(3) not null,
    "iso_639_1" character(2),
    "type" public.language_type not null,
    "name" text
      );


alter table "public"."language" enable row level security;


  create table "public"."notification" (
    "id" bigint generated by default as identity not null,
    "user_id" bigint not null,
    "type" text not null,
    "title" text not null,
    "message" text,
    "link" text,
    "read_at" timestamp with time zone,
    "created_at" timestamp with time zone not null default now(),
    "source_type" text,
    "source_id" bigint
      );



  create table "public"."notification_preference" (
    "user_id" bigint not null,
    "comment_replies" boolean not null default true,
    "comment_reactions" boolean not null default true,
    "comment_mentions" boolean not null default true,
    "updated_at" timestamp with time zone not null default now()
      );



  create table "public"."publisher" (
    "id" bigint generated by default as identity not null,
    "name" text not null,
    "sorting_key" text not null,
    "description" text,
    "image_id" bigint,
    "url" text,
    "wikipedia_url" text,
    "updated_by" bigint,
    "updated_at" timestamp with time zone,
    "created_at" timestamp with time zone not null default now(),
    "search_vector" tsvector generated always as ((setweight(to_tsvector('simple'::regconfig, COALESCE(name, ''::text)), 'A'::"char") || setweight(to_tsvector('simple'::regconfig, COALESCE(description, ''::text)), 'B'::"char"))) stored
      );


alter table "public"."publisher" enable row level security;


  create table "public"."publisher_comment" (
    "publisher_id" bigint generated by default as identity not null,
    "comment_id" bigint not null
      );


alter table "public"."publisher_comment" enable row level security;


  create table "public"."review" (
    "id" bigint generated by default as identity not null,
    "edition_id" bigint not null,
    "content" text not null,
    "reviewer_id" bigint,
    "publication_name" text,
    "published_at" date,
    "updated_by" bigint,
    "updated_at" timestamp with time zone,
    "created_at" timestamp with time zone not null default now(),
    "url" text,
    "excerpt" text
      );


alter table "public"."review" enable row level security;


  create table "public"."series" (
    "id" bigint generated by default as identity not null,
    "name" text,
    "updated_by" bigint,
    "updated_at" timestamp with time zone,
    "created_at" timestamp with time zone not null default now(),
    "language" bpchar
      );


alter table "public"."series" enable row level security;


  create table "public"."series_comment" (
    "series_id" bigint generated by default as identity not null,
    "comment_id" bigint
      );


alter table "public"."series_comment" enable row level security;


  create table "public"."series_entry" (
    "work_id" bigint generated by default as identity not null,
    "series_id" bigint not null,
    "position" smallint
      );


alter table "public"."series_entry" enable row level security;


  create table "public"."series_tag" (
    "series_id" bigint generated by default as identity not null,
    "tag_id" bigint not null
      );


alter table "public"."series_tag" enable row level security;


  create table "public"."settings_revision" (
    "version" integer generated always as identity not null,
    "data" jsonb not null,
    "created_at" timestamp with time zone not null default now(),
    "updated_at" timestamp with time zone not null default now(),
    "updated_by" bigint
      );



  create table "public"."tag" (
    "id" bigint generated by default as identity not null,
    "value" text not null,
    "color" text,
    "emoji" text,
    "created_by" bigint,
    "created_at" timestamp with time zone not null default now()
      );


alter table "public"."tag" enable row level security;


  create table "public"."user_block" (
    "blocker_id" bigint not null,
    "blocked_id" bigint not null,
    "created_at" timestamp with time zone not null default now()
      );


alter table "public"."user_block" enable row level security;


  create table "public"."user_collection_favorite" (
    "user_id" bigint generated by default as identity not null,
    "collection_id" bigint not null
      );


alter table "public"."user_collection_favorite" enable row level security;


  create table "public"."user_creator_favorite" (
    "user_id" bigint generated by default as identity not null,
    "creator_id" bigint not null
      );


alter table "public"."user_creator_favorite" enable row level security;


  create table "public"."work" (
    "id" bigint generated by default as identity not null,
    "created_at" timestamp with time zone not null default now(),
    "updated_at" timestamp with time zone,
    "updated_by" bigint,
    "main_edition_id" bigint,
    "created_by" bigint
      );


alter table "public"."work" enable row level security;


  create table "public"."work_comment" (
    "work_id" bigint generated by default as identity not null,
    "comment_id" bigint not null
      );


alter table "public"."work_comment" enable row level security;


  create table "public"."work_rating" (
    "user_id" bigint not null,
    "work_id" bigint generated by default as identity not null,
    "rating" smallint not null,
    "created_at" timestamp with time zone not null default now()
      );


alter table "public"."work_rating" enable row level security;


  create table "public"."work_tag" (
    "work_id" bigint generated by default as identity not null,
    "tag_id" bigint not null
      );


alter table "public"."work_tag" enable row level security;

CREATE UNIQUE INDEX access_token_pkey ON authentication.access_token USING btree (id);

CREATE UNIQUE INDEX authenticator_pkey ON authentication.authenticator USING btree (id);

CREATE UNIQUE INDEX authorization_code_pkey ON authentication.authorization_code USING btree (id);

CREATE UNIQUE INDEX authorization_request_pkey ON authentication.authorization_request USING btree (id);

CREATE UNIQUE INDEX challenge_pkey ON authentication.challenge USING btree (id);

CREATE UNIQUE INDEX client_pkey ON authentication.client USING btree (id);

CREATE UNIQUE INDEX client_redirect_uris_key ON authentication.client USING btree (redirect_uris);

CREATE UNIQUE INDEX client_scopes_pkey ON authentication.client_scope USING btree (client_id, scope_id);

CREATE UNIQUE INDEX device_challenge_pkey ON authentication.device_challenge USING btree (id);

CREATE UNIQUE INDEX passcode_pkey ON authentication.passcode USING btree (id);

CREATE UNIQUE INDEX passcode_user_id_key ON authentication.passcode USING btree (user_id);

CREATE UNIQUE INDEX refresh_token_pkey ON authentication.refresh_token USING btree (id);

CREATE UNIQUE INDEX refresh_token_token_key ON authentication.refresh_token USING btree (token);

CREATE UNIQUE INDEX scope_pkey ON authentication.scope USING btree (id);

CREATE UNIQUE INDEX user_consent_pkey ON authentication.user_consent USING btree (user_id, client_id);

CREATE UNIQUE INDEX user_email_key ON authentication."user" USING btree (email);

CREATE UNIQUE INDEX user_pkey ON authentication."user" USING btree (id);

CREATE UNIQUE INDEX asset_checksum_key ON public.asset USING btree (checksum);

CREATE UNIQUE INDEX asset_pkey ON public.asset USING btree (id);

CREATE UNIQUE INDEX asset_storage_reference_key ON public.asset USING btree (storage_reference);

CREATE UNIQUE INDEX catalog_pkey ON public.catalog USING btree (id);

CREATE UNIQUE INDEX collection_comment_pkey ON public.collection_comment USING btree (collection_id, comment_id);

CREATE UNIQUE INDEX collection_entry_pkey ON public.collection_entry USING btree (collection_id, work_id, edition_id);

CREATE UNIQUE INDEX collection_pkey ON public.collection USING btree (id);

CREATE UNIQUE INDEX collection_tag_pkey ON public.collection_tag USING btree (collection_id, tag_id);

CREATE UNIQUE INDEX comment_pkey ON public.comment USING btree (id);

CREATE UNIQUE INDEX comment_reaction_pkey ON public.comment_reaction USING btree (comment_id, user_id);

CREATE UNIQUE INDEX comment_report_pkey ON public.comment_report USING btree (id);

CREATE UNIQUE INDEX comment_report_unique_per_user ON public.comment_report USING btree (comment_id, reported_by);

CREATE UNIQUE INDEX contribution_pkey ON public.contribution USING btree (creator_id, edition_id);

CREATE UNIQUE INDEX creator_comment_pkey ON public.creator_comment USING btree (creator_id, comment_id);

CREATE UNIQUE INDEX creator_pkey ON public.creator USING btree (id);

CREATE UNIQUE INDEX edition_asin_key ON public.edition USING btree (asin);

CREATE UNIQUE INDEX edition_pkey ON public.edition USING btree (id);

CREATE INDEX idx_collection_search ON public.collection USING gin (search_vector);

CREATE INDEX idx_comment_created_at ON public.comment USING btree (created_at);

CREATE INDEX idx_comment_parent_comment_id ON public.comment USING btree (parent_comment_id);

CREATE INDEX idx_comment_report_comment ON public.comment_report USING btree (comment_id);

CREATE INDEX idx_comment_report_unresolved ON public.comment_report USING btree (resolved_at) WHERE (resolved_at IS NULL);

CREATE INDEX idx_creator_search ON public.creator USING gin (search_vector);

CREATE INDEX idx_edition_search ON public.edition USING gin (search_vector);

CREATE INDEX idx_notification_user_created ON public.notification USING btree (user_id, created_at DESC);

CREATE INDEX idx_notification_user_unread ON public.notification USING btree (user_id, read_at) WHERE (read_at IS NULL);

CREATE INDEX idx_publisher_search ON public.publisher USING gin (search_vector);

CREATE INDEX idx_user_block_blocker ON public.user_block USING btree (blocker_id);

CREATE UNIQUE INDEX image_checksum_key ON public.image USING btree (checksum);

CREATE UNIQUE INDEX image_creator_pkey ON public.image_creator USING btree (image_id, creator_id);

CREATE UNIQUE INDEX image_pkey ON public.image USING btree (id);

CREATE UNIQUE INDEX image_storage_reference_key ON public.image USING btree (storage_reference);

CREATE UNIQUE INDEX language_pkey ON public.language USING btree (iso_639_3);

CREATE UNIQUE INDEX notification_pkey ON public.notification USING btree (id);

CREATE UNIQUE INDEX notification_preference_pkey ON public.notification_preference USING btree (user_id);

CREATE UNIQUE INDEX publisher_comment_pkey ON public.publisher_comment USING btree (publisher_id, comment_id);

CREATE UNIQUE INDEX publisher_pkey ON public.publisher USING btree (id);

CREATE UNIQUE INDEX review_pkey ON public.review USING btree (id);

CREATE UNIQUE INDEX series_comment_pkey ON public.series_comment USING btree (series_id);

CREATE UNIQUE INDEX series_entry_pkey ON public.series_entry USING btree (work_id, series_id);

CREATE UNIQUE INDEX series_pkey ON public.series USING btree (id);

CREATE UNIQUE INDEX series_tag_pkey ON public.series_tag USING btree (series_id, tag_id);

CREATE UNIQUE INDEX settings_revision_pkey ON public.settings_revision USING btree (version);

CREATE UNIQUE INDEX tag_pkey ON public.tag USING btree (id);

CREATE UNIQUE INDEX user_block_pkey ON public.user_block USING btree (blocker_id, blocked_id);

CREATE UNIQUE INDEX user_collection_favorite_pkey ON public.user_collection_favorite USING btree (user_id, collection_id);

CREATE UNIQUE INDEX user_creator_favorite_pkey ON public.user_creator_favorite USING btree (user_id, creator_id);

CREATE UNIQUE INDEX work_comment_pkey ON public.work_comment USING btree (work_id, comment_id);

CREATE UNIQUE INDEX work_pkey ON public.work USING btree (id);

CREATE UNIQUE INDEX work_rating_pkey ON public.work_rating USING btree (user_id, work_id);

CREATE UNIQUE INDEX work_tag_pkey ON public.work_tag USING btree (work_id, tag_id);

alter table "authentication"."access_token" add constraint "access_token_pkey" PRIMARY KEY using index "access_token_pkey";

alter table "authentication"."authenticator" add constraint "authenticator_pkey" PRIMARY KEY using index "authenticator_pkey";

alter table "authentication"."authorization_code" add constraint "authorization_code_pkey" PRIMARY KEY using index "authorization_code_pkey";

alter table "authentication"."authorization_request" add constraint "authorization_request_pkey" PRIMARY KEY using index "authorization_request_pkey";

alter table "authentication"."challenge" add constraint "challenge_pkey" PRIMARY KEY using index "challenge_pkey";

alter table "authentication"."client" add constraint "client_pkey" PRIMARY KEY using index "client_pkey";

alter table "authentication"."client_scope" add constraint "client_scopes_pkey" PRIMARY KEY using index "client_scopes_pkey";

alter table "authentication"."device_challenge" add constraint "device_challenge_pkey" PRIMARY KEY using index "device_challenge_pkey";

alter table "authentication"."passcode" add constraint "passcode_pkey" PRIMARY KEY using index "passcode_pkey";

alter table "authentication"."refresh_token" add constraint "refresh_token_pkey" PRIMARY KEY using index "refresh_token_pkey";

alter table "authentication"."scope" add constraint "scope_pkey" PRIMARY KEY using index "scope_pkey";

alter table "authentication"."user" add constraint "user_pkey" PRIMARY KEY using index "user_pkey";

alter table "authentication"."user_consent" add constraint "user_consent_pkey" PRIMARY KEY using index "user_consent_pkey";

alter table "public"."asset" add constraint "asset_pkey" PRIMARY KEY using index "asset_pkey";

alter table "public"."catalog" add constraint "catalog_pkey" PRIMARY KEY using index "catalog_pkey";

alter table "public"."collection" add constraint "collection_pkey" PRIMARY KEY using index "collection_pkey";

alter table "public"."collection_comment" add constraint "collection_comment_pkey" PRIMARY KEY using index "collection_comment_pkey";

alter table "public"."collection_entry" add constraint "collection_entry_pkey" PRIMARY KEY using index "collection_entry_pkey";

alter table "public"."collection_tag" add constraint "collection_tag_pkey" PRIMARY KEY using index "collection_tag_pkey";

alter table "public"."comment" add constraint "comment_pkey" PRIMARY KEY using index "comment_pkey";

alter table "public"."comment_reaction" add constraint "comment_reaction_pkey" PRIMARY KEY using index "comment_reaction_pkey";

alter table "public"."comment_report" add constraint "comment_report_pkey" PRIMARY KEY using index "comment_report_pkey";

alter table "public"."contribution" add constraint "contribution_pkey" PRIMARY KEY using index "contribution_pkey";

alter table "public"."creator" add constraint "creator_pkey" PRIMARY KEY using index "creator_pkey";

alter table "public"."creator_comment" add constraint "creator_comment_pkey" PRIMARY KEY using index "creator_comment_pkey";

alter table "public"."edition" add constraint "edition_pkey" PRIMARY KEY using index "edition_pkey";

alter table "public"."image" add constraint "image_pkey" PRIMARY KEY using index "image_pkey";

alter table "public"."image_creator" add constraint "image_creator_pkey" PRIMARY KEY using index "image_creator_pkey";

alter table "public"."language" add constraint "language_pkey" PRIMARY KEY using index "language_pkey";

alter table "public"."notification" add constraint "notification_pkey" PRIMARY KEY using index "notification_pkey";

alter table "public"."notification_preference" add constraint "notification_preference_pkey" PRIMARY KEY using index "notification_preference_pkey";

alter table "public"."publisher" add constraint "publisher_pkey" PRIMARY KEY using index "publisher_pkey";

alter table "public"."publisher_comment" add constraint "publisher_comment_pkey" PRIMARY KEY using index "publisher_comment_pkey";

alter table "public"."review" add constraint "review_pkey" PRIMARY KEY using index "review_pkey";

alter table "public"."series" add constraint "series_pkey" PRIMARY KEY using index "series_pkey";

alter table "public"."series_comment" add constraint "series_comment_pkey" PRIMARY KEY using index "series_comment_pkey";

alter table "public"."series_entry" add constraint "series_entry_pkey" PRIMARY KEY using index "series_entry_pkey";

alter table "public"."series_tag" add constraint "series_tag_pkey" PRIMARY KEY using index "series_tag_pkey";

alter table "public"."settings_revision" add constraint "settings_revision_pkey" PRIMARY KEY using index "settings_revision_pkey";

alter table "public"."tag" add constraint "tag_pkey" PRIMARY KEY using index "tag_pkey";

alter table "public"."user_block" add constraint "user_block_pkey" PRIMARY KEY using index "user_block_pkey";

alter table "public"."user_collection_favorite" add constraint "user_collection_favorite_pkey" PRIMARY KEY using index "user_collection_favorite_pkey";

alter table "public"."user_creator_favorite" add constraint "user_creator_favorite_pkey" PRIMARY KEY using index "user_creator_favorite_pkey";

alter table "public"."work" add constraint "work_pkey" PRIMARY KEY using index "work_pkey";

alter table "public"."work_comment" add constraint "work_comment_pkey" PRIMARY KEY using index "work_comment_pkey";

alter table "public"."work_rating" add constraint "work_rating_pkey" PRIMARY KEY using index "work_rating_pkey";

alter table "public"."work_tag" add constraint "work_tag_pkey" PRIMARY KEY using index "work_tag_pkey";

alter table "authentication"."access_token" add constraint "access_token_client_id_fkey" FOREIGN KEY (client_id) REFERENCES authentication.client(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "authentication"."access_token" validate constraint "access_token_client_id_fkey";

alter table "authentication"."access_token" add constraint "access_token_user_id_fkey" FOREIGN KEY (user_id) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "authentication"."access_token" validate constraint "access_token_user_id_fkey";

alter table "authentication"."authenticator" add constraint "authentication_authenticator_user_id_fkey" FOREIGN KEY (user_id) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "authentication"."authenticator" validate constraint "authentication_authenticator_user_id_fkey";

alter table "authentication"."authorization_code" add constraint "authorization_code_client_id_fkey" FOREIGN KEY (client_id) REFERENCES authentication.client(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "authentication"."authorization_code" validate constraint "authorization_code_client_id_fkey";

alter table "authentication"."authorization_code" add constraint "authorization_code_user_id_fkey" FOREIGN KEY (user_id) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "authentication"."authorization_code" validate constraint "authorization_code_user_id_fkey";

alter table "authentication"."authorization_request" add constraint "authorization_request_client_id_fkey" FOREIGN KEY (client_id) REFERENCES authentication.client(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "authentication"."authorization_request" validate constraint "authorization_request_client_id_fkey";

alter table "authentication"."client" add constraint "client_id_check" CHECK ((id ~ '^[a-zA-Z][a-zA-Z0-9:-]*[a-zA-Z0-9]$'::text)) not valid;

alter table "authentication"."client" validate constraint "client_id_check";

alter table "authentication"."client" add constraint "client_redirect_uris_key" UNIQUE using index "client_redirect_uris_key";

alter table "authentication"."client" add constraint "client_user_id_fkey" FOREIGN KEY (user_id) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "authentication"."client" validate constraint "client_user_id_fkey";

alter table "authentication"."client_scope" add constraint "client_scopes_client_id_fkey" FOREIGN KEY (client_id) REFERENCES authentication.client(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "authentication"."client_scope" validate constraint "client_scopes_client_id_fkey";

alter table "authentication"."client_scope" add constraint "client_scopes_scope_id_fkey" FOREIGN KEY (scope_id) REFERENCES authentication.scope(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "authentication"."client_scope" validate constraint "client_scopes_scope_id_fkey";

alter table "authentication"."device_challenge" add constraint "device_challenge_client_id_fkey" FOREIGN KEY (client_id) REFERENCES authentication.client(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "authentication"."device_challenge" validate constraint "device_challenge_client_id_fkey";

alter table "authentication"."device_challenge" add constraint "device_challenge_user_code_check" CHECK ((length(user_code) <= 8)) not valid;

alter table "authentication"."device_challenge" validate constraint "device_challenge_user_code_check";

alter table "authentication"."passcode" add constraint "authentication_passcode_user_id_fkey" FOREIGN KEY (user_id) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "authentication"."passcode" validate constraint "authentication_passcode_user_id_fkey";

alter table "authentication"."passcode" add constraint "passcode_user_id_key" UNIQUE using index "passcode_user_id_key";

alter table "authentication"."refresh_token" add constraint "refresh_token_client_id_fkey" FOREIGN KEY (client_id) REFERENCES authentication.client(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "authentication"."refresh_token" validate constraint "refresh_token_client_id_fkey";

alter table "authentication"."refresh_token" add constraint "refresh_token_token_key" UNIQUE using index "refresh_token_token_key";

alter table "authentication"."refresh_token" add constraint "refresh_token_user_id_fkey" FOREIGN KEY (user_id) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "authentication"."refresh_token" validate constraint "refresh_token_user_id_fkey";

alter table "authentication"."scope" add constraint "scope_id_check" CHECK ((id ~ '^[a-zA-Z][a-zA-Z0-9:_-]*[a-zA-Z0-9]$'::text)) not valid;

alter table "authentication"."scope" validate constraint "scope_id_check";

alter table "authentication"."user" add constraint "user_email_key" UNIQUE using index "user_email_key";

alter table "authentication"."user_consent" add constraint "user_consent_client_id_fkey" FOREIGN KEY (client_id) REFERENCES authentication.client(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "authentication"."user_consent" validate constraint "user_consent_client_id_fkey";

alter table "authentication"."user_consent" add constraint "user_consent_user_id_fkey" FOREIGN KEY (user_id) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "authentication"."user_consent" validate constraint "user_consent_user_id_fkey";

alter table "public"."asset" add constraint "asset_checksum_key" UNIQUE using index "asset_checksum_key";

alter table "public"."asset" add constraint "asset_created_by_fkey" FOREIGN KEY (created_by) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."asset" validate constraint "asset_created_by_fkey";

alter table "public"."asset" add constraint "asset_edition_id_fkey" FOREIGN KEY (edition_id) REFERENCES public.edition(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."asset" validate constraint "asset_edition_id_fkey";

alter table "public"."asset" add constraint "asset_metadata_check" CHECK ((jsonb_typeof(metadata) = 'object'::text)) not valid;

alter table "public"."asset" validate constraint "asset_metadata_check";

alter table "public"."asset" add constraint "asset_storage_reference_check" CHECK ((storage_reference ~ '^s3://.+/.+'::text)) not valid;

alter table "public"."asset" validate constraint "asset_storage_reference_check";

alter table "public"."asset" add constraint "asset_storage_reference_key" UNIQUE using index "asset_storage_reference_key";

alter table "public"."asset" add constraint "asset_updated_by_fkey" FOREIGN KEY (updated_by) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."asset" validate constraint "asset_updated_by_fkey";

alter table "public"."catalog" add constraint "catalog_age_requirement_check" CHECK ((age_requirement >= 0)) not valid;

alter table "public"."catalog" validate constraint "catalog_age_requirement_check";

alter table "public"."catalog" add constraint "catalog_updated_by_fkey" FOREIGN KEY (updated_by) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."catalog" validate constraint "catalog_updated_by_fkey";

alter table "public"."collection" add constraint "collection_age_requirement_check" CHECK ((age_requirement >= 0)) not valid;

alter table "public"."collection" validate constraint "collection_age_requirement_check";

alter table "public"."collection" add constraint "collection_created_by_fkey" FOREIGN KEY (created_by) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."collection" validate constraint "collection_created_by_fkey";

alter table "public"."collection" add constraint "collection_name_check" CHECK ((length(name) < 151)) not valid;

alter table "public"."collection" validate constraint "collection_name_check";

alter table "public"."collection" add constraint "collection_updated_by_fkey" FOREIGN KEY (updated_by) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."collection" validate constraint "collection_updated_by_fkey";

alter table "public"."collection_comment" add constraint "collection_comment_collection_id_fkey" FOREIGN KEY (collection_id) REFERENCES public.collection(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."collection_comment" validate constraint "collection_comment_collection_id_fkey";

alter table "public"."collection_comment" add constraint "collection_comment_comment_id_fkey" FOREIGN KEY (comment_id) REFERENCES public.comment(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."collection_comment" validate constraint "collection_comment_comment_id_fkey";

alter table "public"."collection_entry" add constraint "collection_entry_collection_id_fkey" FOREIGN KEY (collection_id) REFERENCES public.collection(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."collection_entry" validate constraint "collection_entry_collection_id_fkey";

alter table "public"."collection_entry" add constraint "collection_entry_created_by_fkey" FOREIGN KEY (created_by) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."collection_entry" validate constraint "collection_entry_created_by_fkey";

alter table "public"."collection_entry" add constraint "collection_entry_edition_id_fkey" FOREIGN KEY (edition_id) REFERENCES public.edition(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."collection_entry" validate constraint "collection_entry_edition_id_fkey";

alter table "public"."collection_entry" add constraint "collection_entry_updated_by_fkey" FOREIGN KEY (updated_by) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."collection_entry" validate constraint "collection_entry_updated_by_fkey";

alter table "public"."collection_entry" add constraint "collection_entry_work_id_fkey" FOREIGN KEY (work_id) REFERENCES public.work(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."collection_entry" validate constraint "collection_entry_work_id_fkey";

alter table "public"."collection_tag" add constraint "collection_tag_collection_id_fkey" FOREIGN KEY (collection_id) REFERENCES public.collection(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."collection_tag" validate constraint "collection_tag_collection_id_fkey";

alter table "public"."collection_tag" add constraint "collection_tag_tag_id_fkey" FOREIGN KEY (tag_id) REFERENCES public.tag(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."collection_tag" validate constraint "collection_tag_tag_id_fkey";

alter table "public"."comment" add constraint "comment_created_by_fkey" FOREIGN KEY (created_by) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."comment" validate constraint "comment_created_by_fkey";

alter table "public"."comment" add constraint "comment_hidden_by_fkey" FOREIGN KEY (hidden_by) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."comment" validate constraint "comment_hidden_by_fkey";

alter table "public"."comment" add constraint "comment_parent_comment_id_fkey" FOREIGN KEY (parent_comment_id) REFERENCES public.comment(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."comment" validate constraint "comment_parent_comment_id_fkey";

alter table "public"."comment_reaction" add constraint "comment_reaction_comment_id_fkey" FOREIGN KEY (comment_id) REFERENCES public.comment(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."comment_reaction" validate constraint "comment_reaction_comment_id_fkey";

alter table "public"."comment_reaction" add constraint "comment_reaction_user_id_fkey" FOREIGN KEY (user_id) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."comment_reaction" validate constraint "comment_reaction_user_id_fkey";

alter table "public"."comment_report" add constraint "comment_report_comment_id_fkey" FOREIGN KEY (comment_id) REFERENCES public.comment(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."comment_report" validate constraint "comment_report_comment_id_fkey";

alter table "public"."comment_report" add constraint "comment_report_reported_by_fkey" FOREIGN KEY (reported_by) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."comment_report" validate constraint "comment_report_reported_by_fkey";

alter table "public"."comment_report" add constraint "comment_report_resolved_by_fkey" FOREIGN KEY (resolved_by) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."comment_report" validate constraint "comment_report_resolved_by_fkey";

alter table "public"."comment_report" add constraint "comment_report_unique_per_user" UNIQUE using index "comment_report_unique_per_user";

alter table "public"."contribution" add constraint "contribution_creator_id_fkey" FOREIGN KEY (creator_id) REFERENCES public.creator(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."contribution" validate constraint "contribution_creator_id_fkey";

alter table "public"."contribution" add constraint "contribution_edition_id_fkey" FOREIGN KEY (edition_id) REFERENCES public.edition(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."contribution" validate constraint "contribution_edition_id_fkey";

alter table "public"."creator" add constraint "creator_image_id_fkey" FOREIGN KEY (image_id) REFERENCES public.image(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."creator" validate constraint "creator_image_id_fkey";

alter table "public"."creator" add constraint "creator_updated_by_fkey" FOREIGN KEY (updated_by) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."creator" validate constraint "creator_updated_by_fkey";

alter table "public"."creator_comment" add constraint "creator_comment_comment_id_fkey" FOREIGN KEY (comment_id) REFERENCES public.comment(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."creator_comment" validate constraint "creator_comment_comment_id_fkey";

alter table "public"."creator_comment" add constraint "creator_comment_creator_id_fkey" FOREIGN KEY (creator_id) REFERENCES public.creator(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."creator_comment" validate constraint "creator_comment_creator_id_fkey";

alter table "public"."edition" add constraint "check_edition_asin" CHECK ((asin ~ '^[A-Z0-9]{10}$'::text)) not valid;

alter table "public"."edition" validate constraint "check_edition_asin";

alter table "public"."edition" add constraint "edition_asin_key" UNIQUE using index "edition_asin_key";

alter table "public"."edition" add constraint "edition_cover_image_id_fkey" FOREIGN KEY (cover_image_id) REFERENCES public.image(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."edition" validate constraint "edition_cover_image_id_fkey";

alter table "public"."edition" add constraint "edition_language_fkey" FOREIGN KEY (language) REFERENCES public.language(iso_639_3) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."edition" validate constraint "edition_language_fkey";

alter table "public"."edition" add constraint "edition_publisher_id_fkey" FOREIGN KEY (publisher_id) REFERENCES public.publisher(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."edition" validate constraint "edition_publisher_id_fkey";

alter table "public"."edition" add constraint "edition_updated_by_fkey" FOREIGN KEY (updated_by) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."edition" validate constraint "edition_updated_by_fkey";

alter table "public"."edition" add constraint "edition_work_id_fkey" FOREIGN KEY (work_id) REFERENCES public.work(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."edition" validate constraint "edition_work_id_fkey";

alter table "public"."image" add constraint "image_checksum_key" UNIQUE using index "image_checksum_key";

alter table "public"."image" add constraint "image_created_by_fkey" FOREIGN KEY (created_by) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."image" validate constraint "image_created_by_fkey";

alter table "public"."image" add constraint "image_metadata_check" CHECK ((jsonb_typeof(metadata) = 'object'::text)) not valid;

alter table "public"."image" validate constraint "image_metadata_check";

alter table "public"."image" add constraint "image_storage_reference_check" CHECK ((storage_reference ~ '^s3://.+/.+'::text)) not valid;

alter table "public"."image" validate constraint "image_storage_reference_check";

alter table "public"."image" add constraint "image_storage_reference_key" UNIQUE using index "image_storage_reference_key";

alter table "public"."image" add constraint "image_updated_by_fkey" FOREIGN KEY (updated_by) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."image" validate constraint "image_updated_by_fkey";

alter table "public"."image_creator" add constraint "image_creator_creator_id_fkey" FOREIGN KEY (creator_id) REFERENCES public.creator(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."image_creator" validate constraint "image_creator_creator_id_fkey";

alter table "public"."image_creator" add constraint "image_creator_image_id_fkey" FOREIGN KEY (image_id) REFERENCES public.image(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."image_creator" validate constraint "image_creator_image_id_fkey";

alter table "public"."notification" add constraint "notification_user_fk" FOREIGN KEY (user_id) REFERENCES authentication."user"(id) ON DELETE CASCADE not valid;

alter table "public"."notification" validate constraint "notification_user_fk";

alter table "public"."notification_preference" add constraint "notification_preference_user_fk" FOREIGN KEY (user_id) REFERENCES authentication."user"(id) ON DELETE CASCADE not valid;

alter table "public"."notification_preference" validate constraint "notification_preference_user_fk";

alter table "public"."publisher" add constraint "publisher_image_id_fkey" FOREIGN KEY (image_id) REFERENCES public.image(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."publisher" validate constraint "publisher_image_id_fkey";

alter table "public"."publisher" add constraint "publisher_updated_by_fkey" FOREIGN KEY (updated_by) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."publisher" validate constraint "publisher_updated_by_fkey";

alter table "public"."publisher_comment" add constraint "publisher_comment_comment_id_fkey" FOREIGN KEY (comment_id) REFERENCES public.comment(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."publisher_comment" validate constraint "publisher_comment_comment_id_fkey";

alter table "public"."publisher_comment" add constraint "publisher_comment_publisher_id_fkey" FOREIGN KEY (publisher_id) REFERENCES public.publisher(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."publisher_comment" validate constraint "publisher_comment_publisher_id_fkey";

alter table "public"."review" add constraint "review_edition_id_fkey" FOREIGN KEY (edition_id) REFERENCES public.edition(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."review" validate constraint "review_edition_id_fkey";

alter table "public"."review" add constraint "review_excerpt_check" CHECK ((length(excerpt) < 201)) not valid;

alter table "public"."review" validate constraint "review_excerpt_check";

alter table "public"."review" add constraint "review_reviewer_id_fkey" FOREIGN KEY (reviewer_id) REFERENCES public.creator(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."review" validate constraint "review_reviewer_id_fkey";

alter table "public"."review" add constraint "review_updated_by_fkey" FOREIGN KEY (updated_by) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."review" validate constraint "review_updated_by_fkey";

alter table "public"."series" add constraint "series_language_fkey" FOREIGN KEY (language) REFERENCES public.language(iso_639_3) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."series" validate constraint "series_language_fkey";

alter table "public"."series" add constraint "series_updated_by_fkey" FOREIGN KEY (updated_by) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."series" validate constraint "series_updated_by_fkey";

alter table "public"."series_comment" add constraint "series_comment_comment_id_fkey" FOREIGN KEY (comment_id) REFERENCES public.comment(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."series_comment" validate constraint "series_comment_comment_id_fkey";

alter table "public"."series_comment" add constraint "series_comment_series_id_fkey" FOREIGN KEY (series_id) REFERENCES public.series(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."series_comment" validate constraint "series_comment_series_id_fkey";

alter table "public"."series_entry" add constraint "series_entry_series_id_fkey" FOREIGN KEY (series_id) REFERENCES public.series(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."series_entry" validate constraint "series_entry_series_id_fkey";

alter table "public"."series_entry" add constraint "series_entry_work_id_fkey" FOREIGN KEY (work_id) REFERENCES public.work(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."series_entry" validate constraint "series_entry_work_id_fkey";

alter table "public"."series_tag" add constraint "series_tag_series_id_fkey" FOREIGN KEY (series_id) REFERENCES public.series(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."series_tag" validate constraint "series_tag_series_id_fkey";

alter table "public"."series_tag" add constraint "series_tag_tag_id_fkey" FOREIGN KEY (tag_id) REFERENCES public.tag(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."series_tag" validate constraint "series_tag_tag_id_fkey";

alter table "public"."settings_revision" add constraint "settings_revision_updated_by_user_id_fkey" FOREIGN KEY (updated_by) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."settings_revision" validate constraint "settings_revision_updated_by_user_id_fkey";

alter table "public"."tag" add constraint "tag_created_by_fkey" FOREIGN KEY (created_by) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."tag" validate constraint "tag_created_by_fkey";

alter table "public"."user_block" add constraint "user_block_blocked_id_fkey" FOREIGN KEY (blocked_id) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."user_block" validate constraint "user_block_blocked_id_fkey";

alter table "public"."user_block" add constraint "user_block_blocker_id_fkey" FOREIGN KEY (blocker_id) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."user_block" validate constraint "user_block_blocker_id_fkey";

alter table "public"."user_collection_favorite" add constraint "user_collection_favorite_collection_id_fkey" FOREIGN KEY (collection_id) REFERENCES public.collection(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."user_collection_favorite" validate constraint "user_collection_favorite_collection_id_fkey";

alter table "public"."user_collection_favorite" add constraint "user_collection_favorite_user_id_fkey" FOREIGN KEY (user_id) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."user_collection_favorite" validate constraint "user_collection_favorite_user_id_fkey";

alter table "public"."user_creator_favorite" add constraint "user_creator_favorite_creator_id_fkey" FOREIGN KEY (creator_id) REFERENCES public.creator(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."user_creator_favorite" validate constraint "user_creator_favorite_creator_id_fkey";

alter table "public"."user_creator_favorite" add constraint "user_creator_favorite_user_id_fkey" FOREIGN KEY (user_id) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."user_creator_favorite" validate constraint "user_creator_favorite_user_id_fkey";

alter table "public"."work" add constraint "work_created_by_fkey" FOREIGN KEY (created_by) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."work" validate constraint "work_created_by_fkey";

alter table "public"."work" add constraint "work_main_edition_id_fkey" FOREIGN KEY (main_edition_id) REFERENCES public.edition(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."work" validate constraint "work_main_edition_id_fkey";

alter table "public"."work" add constraint "work_updated_by_fkey" FOREIGN KEY (updated_by) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE SET NULL not valid;

alter table "public"."work" validate constraint "work_updated_by_fkey";

alter table "public"."work_comment" add constraint "work_comment_comment_id_fkey" FOREIGN KEY (comment_id) REFERENCES public.comment(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."work_comment" validate constraint "work_comment_comment_id_fkey";

alter table "public"."work_comment" add constraint "work_comment_work_id_fkey" FOREIGN KEY (work_id) REFERENCES public.work(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."work_comment" validate constraint "work_comment_work_id_fkey";

alter table "public"."work_rating" add constraint "work_rating_user_id_fkey" FOREIGN KEY (user_id) REFERENCES authentication."user"(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."work_rating" validate constraint "work_rating_user_id_fkey";

alter table "public"."work_rating" add constraint "work_rating_work_id_fkey" FOREIGN KEY (work_id) REFERENCES public.work(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."work_rating" validate constraint "work_rating_work_id_fkey";

alter table "public"."work_tag" add constraint "work_tag_tag_id_fkey" FOREIGN KEY (tag_id) REFERENCES public.tag(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."work_tag" validate constraint "work_tag_tag_id_fkey";

alter table "public"."work_tag" add constraint "work_tag_work_id_fkey" FOREIGN KEY (work_id) REFERENCES public.work(id) ON UPDATE CASCADE ON DELETE CASCADE not valid;

alter table "public"."work_tag" validate constraint "work_tag_work_id_fkey";

set check_function_bodies = off;

CREATE OR REPLACE FUNCTION authentication.validate_authenticator(authenticator_id character varying)
 RETURNS boolean
 LANGUAGE plpgsql
 SECURITY DEFINER
 SET search_path TO ''
AS $function$
begin
    return exists (select 1 from authentication.authenticator a where a.identifier = authenticator_id);
end;
$function$
;

CREATE OR REPLACE FUNCTION authentication.validate_challenge(value character varying)
 RETURNS boolean
 LANGUAGE plpgsql
 SECURITY DEFINER
 SET search_path TO ''
AS $function$
begin
    return exists (select 1 from authentication.challenge c where challenge = value);
end;
$function$
;

create or replace view "public"."settings" as  SELECT settings_revision.version,
    settings_revision.data,
    settings_revision.created_at,
    settings_revision.updated_at,
    settings_revision.updated_by
   FROM public.settings_revision
  ORDER BY settings_revision.version DESC
 LIMIT 1;


CREATE OR REPLACE FUNCTION public.slugify(value text)
 RETURNS text
 LANGUAGE plpgsql
 IMMUTABLE STRICT
 SET search_path TO ''
AS $function$
declare
    slug text;
begin
    -- removes accents (diacritic signs) from a given string --
    with "unaccented" as (select extensions.unaccent("slugify"."value") as "value"),
         "lowercase" as (select lower("unaccented"."value") as "value" from "unaccented"),
         "removed_quotes" as (select regexp_replace("lowercase"."value", '[''"]+', '', 'gi') as "value"
                              from "lowercase"),
         "hyphenated" as (select regexp_replace("removed_quotes"."value", '[^a-z0-9\\-_]+', '-', 'gi') as "value"
                          from "removed_quotes"),
         "trimmed" as (select regexp_replace(regexp_replace("hyphenated"."value", '-+$', ''), '^-', '') as "value"
                       from "hyphenated")
    select "trimmed"."value"
    from "trimmed"
    into slug;

    return slug;
end;
$function$
;

grant delete on table "authentication"."access_token" to "anon";

grant insert on table "authentication"."access_token" to "anon";

grant references on table "authentication"."access_token" to "anon";

grant select on table "authentication"."access_token" to "anon";

grant trigger on table "authentication"."access_token" to "anon";

grant truncate on table "authentication"."access_token" to "anon";

grant update on table "authentication"."access_token" to "anon";

grant delete on table "authentication"."access_token" to "authenticated";

grant insert on table "authentication"."access_token" to "authenticated";

grant references on table "authentication"."access_token" to "authenticated";

grant select on table "authentication"."access_token" to "authenticated";

grant trigger on table "authentication"."access_token" to "authenticated";

grant truncate on table "authentication"."access_token" to "authenticated";

grant update on table "authentication"."access_token" to "authenticated";

grant delete on table "authentication"."access_token" to "service_role";

grant insert on table "authentication"."access_token" to "service_role";

grant references on table "authentication"."access_token" to "service_role";

grant select on table "authentication"."access_token" to "service_role";

grant trigger on table "authentication"."access_token" to "service_role";

grant truncate on table "authentication"."access_token" to "service_role";

grant update on table "authentication"."access_token" to "service_role";

grant delete on table "authentication"."authenticator" to "anon";

grant insert on table "authentication"."authenticator" to "anon";

grant references on table "authentication"."authenticator" to "anon";

grant select on table "authentication"."authenticator" to "anon";

grant trigger on table "authentication"."authenticator" to "anon";

grant truncate on table "authentication"."authenticator" to "anon";

grant update on table "authentication"."authenticator" to "anon";

grant delete on table "authentication"."authenticator" to "authenticated";

grant insert on table "authentication"."authenticator" to "authenticated";

grant references on table "authentication"."authenticator" to "authenticated";

grant select on table "authentication"."authenticator" to "authenticated";

grant trigger on table "authentication"."authenticator" to "authenticated";

grant truncate on table "authentication"."authenticator" to "authenticated";

grant update on table "authentication"."authenticator" to "authenticated";

grant delete on table "authentication"."authenticator" to "service_role";

grant insert on table "authentication"."authenticator" to "service_role";

grant references on table "authentication"."authenticator" to "service_role";

grant select on table "authentication"."authenticator" to "service_role";

grant trigger on table "authentication"."authenticator" to "service_role";

grant truncate on table "authentication"."authenticator" to "service_role";

grant update on table "authentication"."authenticator" to "service_role";

grant delete on table "authentication"."authorization_code" to "anon";

grant insert on table "authentication"."authorization_code" to "anon";

grant references on table "authentication"."authorization_code" to "anon";

grant select on table "authentication"."authorization_code" to "anon";

grant trigger on table "authentication"."authorization_code" to "anon";

grant truncate on table "authentication"."authorization_code" to "anon";

grant update on table "authentication"."authorization_code" to "anon";

grant delete on table "authentication"."authorization_code" to "authenticated";

grant insert on table "authentication"."authorization_code" to "authenticated";

grant references on table "authentication"."authorization_code" to "authenticated";

grant select on table "authentication"."authorization_code" to "authenticated";

grant trigger on table "authentication"."authorization_code" to "authenticated";

grant truncate on table "authentication"."authorization_code" to "authenticated";

grant update on table "authentication"."authorization_code" to "authenticated";

grant delete on table "authentication"."authorization_code" to "service_role";

grant insert on table "authentication"."authorization_code" to "service_role";

grant references on table "authentication"."authorization_code" to "service_role";

grant select on table "authentication"."authorization_code" to "service_role";

grant trigger on table "authentication"."authorization_code" to "service_role";

grant truncate on table "authentication"."authorization_code" to "service_role";

grant update on table "authentication"."authorization_code" to "service_role";

grant delete on table "authentication"."authorization_request" to "anon";

grant insert on table "authentication"."authorization_request" to "anon";

grant references on table "authentication"."authorization_request" to "anon";

grant select on table "authentication"."authorization_request" to "anon";

grant trigger on table "authentication"."authorization_request" to "anon";

grant truncate on table "authentication"."authorization_request" to "anon";

grant update on table "authentication"."authorization_request" to "anon";

grant delete on table "authentication"."authorization_request" to "authenticated";

grant insert on table "authentication"."authorization_request" to "authenticated";

grant references on table "authentication"."authorization_request" to "authenticated";

grant select on table "authentication"."authorization_request" to "authenticated";

grant trigger on table "authentication"."authorization_request" to "authenticated";

grant truncate on table "authentication"."authorization_request" to "authenticated";

grant update on table "authentication"."authorization_request" to "authenticated";

grant delete on table "authentication"."authorization_request" to "service_role";

grant insert on table "authentication"."authorization_request" to "service_role";

grant references on table "authentication"."authorization_request" to "service_role";

grant select on table "authentication"."authorization_request" to "service_role";

grant trigger on table "authentication"."authorization_request" to "service_role";

grant truncate on table "authentication"."authorization_request" to "service_role";

grant update on table "authentication"."authorization_request" to "service_role";

grant delete on table "authentication"."challenge" to "anon";

grant insert on table "authentication"."challenge" to "anon";

grant references on table "authentication"."challenge" to "anon";

grant select on table "authentication"."challenge" to "anon";

grant trigger on table "authentication"."challenge" to "anon";

grant truncate on table "authentication"."challenge" to "anon";

grant update on table "authentication"."challenge" to "anon";

grant delete on table "authentication"."challenge" to "authenticated";

grant insert on table "authentication"."challenge" to "authenticated";

grant references on table "authentication"."challenge" to "authenticated";

grant select on table "authentication"."challenge" to "authenticated";

grant trigger on table "authentication"."challenge" to "authenticated";

grant truncate on table "authentication"."challenge" to "authenticated";

grant update on table "authentication"."challenge" to "authenticated";

grant delete on table "authentication"."challenge" to "service_role";

grant insert on table "authentication"."challenge" to "service_role";

grant references on table "authentication"."challenge" to "service_role";

grant select on table "authentication"."challenge" to "service_role";

grant trigger on table "authentication"."challenge" to "service_role";

grant truncate on table "authentication"."challenge" to "service_role";

grant update on table "authentication"."challenge" to "service_role";

grant delete on table "authentication"."client" to "anon";

grant insert on table "authentication"."client" to "anon";

grant references on table "authentication"."client" to "anon";

grant select on table "authentication"."client" to "anon";

grant trigger on table "authentication"."client" to "anon";

grant truncate on table "authentication"."client" to "anon";

grant update on table "authentication"."client" to "anon";

grant delete on table "authentication"."client" to "authenticated";

grant insert on table "authentication"."client" to "authenticated";

grant references on table "authentication"."client" to "authenticated";

grant select on table "authentication"."client" to "authenticated";

grant trigger on table "authentication"."client" to "authenticated";

grant truncate on table "authentication"."client" to "authenticated";

grant update on table "authentication"."client" to "authenticated";

grant delete on table "authentication"."client" to "service_role";

grant insert on table "authentication"."client" to "service_role";

grant references on table "authentication"."client" to "service_role";

grant select on table "authentication"."client" to "service_role";

grant trigger on table "authentication"."client" to "service_role";

grant truncate on table "authentication"."client" to "service_role";

grant update on table "authentication"."client" to "service_role";

grant delete on table "authentication"."client_scope" to "anon";

grant insert on table "authentication"."client_scope" to "anon";

grant references on table "authentication"."client_scope" to "anon";

grant select on table "authentication"."client_scope" to "anon";

grant trigger on table "authentication"."client_scope" to "anon";

grant truncate on table "authentication"."client_scope" to "anon";

grant update on table "authentication"."client_scope" to "anon";

grant delete on table "authentication"."client_scope" to "authenticated";

grant insert on table "authentication"."client_scope" to "authenticated";

grant references on table "authentication"."client_scope" to "authenticated";

grant select on table "authentication"."client_scope" to "authenticated";

grant trigger on table "authentication"."client_scope" to "authenticated";

grant truncate on table "authentication"."client_scope" to "authenticated";

grant update on table "authentication"."client_scope" to "authenticated";

grant delete on table "authentication"."client_scope" to "service_role";

grant insert on table "authentication"."client_scope" to "service_role";

grant references on table "authentication"."client_scope" to "service_role";

grant select on table "authentication"."client_scope" to "service_role";

grant trigger on table "authentication"."client_scope" to "service_role";

grant truncate on table "authentication"."client_scope" to "service_role";

grant update on table "authentication"."client_scope" to "service_role";

grant delete on table "authentication"."device_challenge" to "anon";

grant insert on table "authentication"."device_challenge" to "anon";

grant references on table "authentication"."device_challenge" to "anon";

grant select on table "authentication"."device_challenge" to "anon";

grant trigger on table "authentication"."device_challenge" to "anon";

grant truncate on table "authentication"."device_challenge" to "anon";

grant update on table "authentication"."device_challenge" to "anon";

grant delete on table "authentication"."device_challenge" to "authenticated";

grant insert on table "authentication"."device_challenge" to "authenticated";

grant references on table "authentication"."device_challenge" to "authenticated";

grant select on table "authentication"."device_challenge" to "authenticated";

grant trigger on table "authentication"."device_challenge" to "authenticated";

grant truncate on table "authentication"."device_challenge" to "authenticated";

grant update on table "authentication"."device_challenge" to "authenticated";

grant delete on table "authentication"."device_challenge" to "service_role";

grant insert on table "authentication"."device_challenge" to "service_role";

grant references on table "authentication"."device_challenge" to "service_role";

grant select on table "authentication"."device_challenge" to "service_role";

grant trigger on table "authentication"."device_challenge" to "service_role";

grant truncate on table "authentication"."device_challenge" to "service_role";

grant update on table "authentication"."device_challenge" to "service_role";

grant delete on table "authentication"."passcode" to "anon";

grant insert on table "authentication"."passcode" to "anon";

grant references on table "authentication"."passcode" to "anon";

grant select on table "authentication"."passcode" to "anon";

grant trigger on table "authentication"."passcode" to "anon";

grant truncate on table "authentication"."passcode" to "anon";

grant update on table "authentication"."passcode" to "anon";

grant delete on table "authentication"."passcode" to "authenticated";

grant insert on table "authentication"."passcode" to "authenticated";

grant references on table "authentication"."passcode" to "authenticated";

grant select on table "authentication"."passcode" to "authenticated";

grant trigger on table "authentication"."passcode" to "authenticated";

grant truncate on table "authentication"."passcode" to "authenticated";

grant update on table "authentication"."passcode" to "authenticated";

grant delete on table "authentication"."passcode" to "service_role";

grant insert on table "authentication"."passcode" to "service_role";

grant references on table "authentication"."passcode" to "service_role";

grant select on table "authentication"."passcode" to "service_role";

grant trigger on table "authentication"."passcode" to "service_role";

grant truncate on table "authentication"."passcode" to "service_role";

grant update on table "authentication"."passcode" to "service_role";

grant delete on table "authentication"."refresh_token" to "anon";

grant insert on table "authentication"."refresh_token" to "anon";

grant references on table "authentication"."refresh_token" to "anon";

grant select on table "authentication"."refresh_token" to "anon";

grant trigger on table "authentication"."refresh_token" to "anon";

grant truncate on table "authentication"."refresh_token" to "anon";

grant update on table "authentication"."refresh_token" to "anon";

grant delete on table "authentication"."refresh_token" to "authenticated";

grant insert on table "authentication"."refresh_token" to "authenticated";

grant references on table "authentication"."refresh_token" to "authenticated";

grant select on table "authentication"."refresh_token" to "authenticated";

grant trigger on table "authentication"."refresh_token" to "authenticated";

grant truncate on table "authentication"."refresh_token" to "authenticated";

grant update on table "authentication"."refresh_token" to "authenticated";

grant delete on table "authentication"."refresh_token" to "service_role";

grant insert on table "authentication"."refresh_token" to "service_role";

grant references on table "authentication"."refresh_token" to "service_role";

grant select on table "authentication"."refresh_token" to "service_role";

grant trigger on table "authentication"."refresh_token" to "service_role";

grant truncate on table "authentication"."refresh_token" to "service_role";

grant update on table "authentication"."refresh_token" to "service_role";

grant delete on table "authentication"."scope" to "anon";

grant insert on table "authentication"."scope" to "anon";

grant references on table "authentication"."scope" to "anon";

grant select on table "authentication"."scope" to "anon";

grant trigger on table "authentication"."scope" to "anon";

grant truncate on table "authentication"."scope" to "anon";

grant update on table "authentication"."scope" to "anon";

grant delete on table "authentication"."scope" to "authenticated";

grant insert on table "authentication"."scope" to "authenticated";

grant references on table "authentication"."scope" to "authenticated";

grant select on table "authentication"."scope" to "authenticated";

grant trigger on table "authentication"."scope" to "authenticated";

grant truncate on table "authentication"."scope" to "authenticated";

grant update on table "authentication"."scope" to "authenticated";

grant delete on table "authentication"."scope" to "service_role";

grant insert on table "authentication"."scope" to "service_role";

grant references on table "authentication"."scope" to "service_role";

grant select on table "authentication"."scope" to "service_role";

grant trigger on table "authentication"."scope" to "service_role";

grant truncate on table "authentication"."scope" to "service_role";

grant update on table "authentication"."scope" to "service_role";

grant delete on table "authentication"."user" to "anon";

grant insert on table "authentication"."user" to "anon";

grant references on table "authentication"."user" to "anon";

grant select on table "authentication"."user" to "anon";

grant trigger on table "authentication"."user" to "anon";

grant truncate on table "authentication"."user" to "anon";

grant update on table "authentication"."user" to "anon";

grant delete on table "authentication"."user" to "authenticated";

grant insert on table "authentication"."user" to "authenticated";

grant references on table "authentication"."user" to "authenticated";

grant select on table "authentication"."user" to "authenticated";

grant trigger on table "authentication"."user" to "authenticated";

grant truncate on table "authentication"."user" to "authenticated";

grant update on table "authentication"."user" to "authenticated";

grant delete on table "authentication"."user" to "service_role";

grant insert on table "authentication"."user" to "service_role";

grant references on table "authentication"."user" to "service_role";

grant select on table "authentication"."user" to "service_role";

grant trigger on table "authentication"."user" to "service_role";

grant truncate on table "authentication"."user" to "service_role";

grant update on table "authentication"."user" to "service_role";

grant delete on table "authentication"."user_consent" to "anon";

grant insert on table "authentication"."user_consent" to "anon";

grant references on table "authentication"."user_consent" to "anon";

grant select on table "authentication"."user_consent" to "anon";

grant trigger on table "authentication"."user_consent" to "anon";

grant truncate on table "authentication"."user_consent" to "anon";

grant update on table "authentication"."user_consent" to "anon";

grant delete on table "authentication"."user_consent" to "authenticated";

grant insert on table "authentication"."user_consent" to "authenticated";

grant references on table "authentication"."user_consent" to "authenticated";

grant select on table "authentication"."user_consent" to "authenticated";

grant trigger on table "authentication"."user_consent" to "authenticated";

grant truncate on table "authentication"."user_consent" to "authenticated";

grant update on table "authentication"."user_consent" to "authenticated";

grant delete on table "authentication"."user_consent" to "service_role";

grant insert on table "authentication"."user_consent" to "service_role";

grant references on table "authentication"."user_consent" to "service_role";

grant select on table "authentication"."user_consent" to "service_role";

grant trigger on table "authentication"."user_consent" to "service_role";

grant truncate on table "authentication"."user_consent" to "service_role";

grant update on table "authentication"."user_consent" to "service_role";

grant delete on table "public"."asset" to "anon";

grant insert on table "public"."asset" to "anon";

grant references on table "public"."asset" to "anon";

grant select on table "public"."asset" to "anon";

grant trigger on table "public"."asset" to "anon";

grant truncate on table "public"."asset" to "anon";

grant update on table "public"."asset" to "anon";

grant delete on table "public"."asset" to "authenticated";

grant insert on table "public"."asset" to "authenticated";

grant references on table "public"."asset" to "authenticated";

grant select on table "public"."asset" to "authenticated";

grant trigger on table "public"."asset" to "authenticated";

grant truncate on table "public"."asset" to "authenticated";

grant update on table "public"."asset" to "authenticated";

grant delete on table "public"."asset" to "service_role";

grant insert on table "public"."asset" to "service_role";

grant references on table "public"."asset" to "service_role";

grant select on table "public"."asset" to "service_role";

grant trigger on table "public"."asset" to "service_role";

grant truncate on table "public"."asset" to "service_role";

grant update on table "public"."asset" to "service_role";

grant delete on table "public"."catalog" to "anon";

grant insert on table "public"."catalog" to "anon";

grant references on table "public"."catalog" to "anon";

grant select on table "public"."catalog" to "anon";

grant trigger on table "public"."catalog" to "anon";

grant truncate on table "public"."catalog" to "anon";

grant update on table "public"."catalog" to "anon";

grant delete on table "public"."catalog" to "authenticated";

grant insert on table "public"."catalog" to "authenticated";

grant references on table "public"."catalog" to "authenticated";

grant select on table "public"."catalog" to "authenticated";

grant trigger on table "public"."catalog" to "authenticated";

grant truncate on table "public"."catalog" to "authenticated";

grant update on table "public"."catalog" to "authenticated";

grant delete on table "public"."catalog" to "service_role";

grant insert on table "public"."catalog" to "service_role";

grant references on table "public"."catalog" to "service_role";

grant select on table "public"."catalog" to "service_role";

grant trigger on table "public"."catalog" to "service_role";

grant truncate on table "public"."catalog" to "service_role";

grant update on table "public"."catalog" to "service_role";

grant delete on table "public"."collection" to "anon";

grant insert on table "public"."collection" to "anon";

grant references on table "public"."collection" to "anon";

grant select on table "public"."collection" to "anon";

grant trigger on table "public"."collection" to "anon";

grant truncate on table "public"."collection" to "anon";

grant update on table "public"."collection" to "anon";

grant delete on table "public"."collection" to "authenticated";

grant insert on table "public"."collection" to "authenticated";

grant references on table "public"."collection" to "authenticated";

grant select on table "public"."collection" to "authenticated";

grant trigger on table "public"."collection" to "authenticated";

grant truncate on table "public"."collection" to "authenticated";

grant update on table "public"."collection" to "authenticated";

grant delete on table "public"."collection" to "service_role";

grant insert on table "public"."collection" to "service_role";

grant references on table "public"."collection" to "service_role";

grant select on table "public"."collection" to "service_role";

grant trigger on table "public"."collection" to "service_role";

grant truncate on table "public"."collection" to "service_role";

grant update on table "public"."collection" to "service_role";

grant delete on table "public"."collection_comment" to "anon";

grant insert on table "public"."collection_comment" to "anon";

grant references on table "public"."collection_comment" to "anon";

grant select on table "public"."collection_comment" to "anon";

grant trigger on table "public"."collection_comment" to "anon";

grant truncate on table "public"."collection_comment" to "anon";

grant update on table "public"."collection_comment" to "anon";

grant delete on table "public"."collection_comment" to "authenticated";

grant insert on table "public"."collection_comment" to "authenticated";

grant references on table "public"."collection_comment" to "authenticated";

grant select on table "public"."collection_comment" to "authenticated";

grant trigger on table "public"."collection_comment" to "authenticated";

grant truncate on table "public"."collection_comment" to "authenticated";

grant update on table "public"."collection_comment" to "authenticated";

grant delete on table "public"."collection_comment" to "service_role";

grant insert on table "public"."collection_comment" to "service_role";

grant references on table "public"."collection_comment" to "service_role";

grant select on table "public"."collection_comment" to "service_role";

grant trigger on table "public"."collection_comment" to "service_role";

grant truncate on table "public"."collection_comment" to "service_role";

grant update on table "public"."collection_comment" to "service_role";

grant delete on table "public"."collection_entry" to "anon";

grant insert on table "public"."collection_entry" to "anon";

grant references on table "public"."collection_entry" to "anon";

grant select on table "public"."collection_entry" to "anon";

grant trigger on table "public"."collection_entry" to "anon";

grant truncate on table "public"."collection_entry" to "anon";

grant update on table "public"."collection_entry" to "anon";

grant delete on table "public"."collection_entry" to "authenticated";

grant insert on table "public"."collection_entry" to "authenticated";

grant references on table "public"."collection_entry" to "authenticated";

grant select on table "public"."collection_entry" to "authenticated";

grant trigger on table "public"."collection_entry" to "authenticated";

grant truncate on table "public"."collection_entry" to "authenticated";

grant update on table "public"."collection_entry" to "authenticated";

grant delete on table "public"."collection_entry" to "service_role";

grant insert on table "public"."collection_entry" to "service_role";

grant references on table "public"."collection_entry" to "service_role";

grant select on table "public"."collection_entry" to "service_role";

grant trigger on table "public"."collection_entry" to "service_role";

grant truncate on table "public"."collection_entry" to "service_role";

grant update on table "public"."collection_entry" to "service_role";

grant delete on table "public"."collection_tag" to "anon";

grant insert on table "public"."collection_tag" to "anon";

grant references on table "public"."collection_tag" to "anon";

grant select on table "public"."collection_tag" to "anon";

grant trigger on table "public"."collection_tag" to "anon";

grant truncate on table "public"."collection_tag" to "anon";

grant update on table "public"."collection_tag" to "anon";

grant delete on table "public"."collection_tag" to "authenticated";

grant insert on table "public"."collection_tag" to "authenticated";

grant references on table "public"."collection_tag" to "authenticated";

grant select on table "public"."collection_tag" to "authenticated";

grant trigger on table "public"."collection_tag" to "authenticated";

grant truncate on table "public"."collection_tag" to "authenticated";

grant update on table "public"."collection_tag" to "authenticated";

grant delete on table "public"."collection_tag" to "service_role";

grant insert on table "public"."collection_tag" to "service_role";

grant references on table "public"."collection_tag" to "service_role";

grant select on table "public"."collection_tag" to "service_role";

grant trigger on table "public"."collection_tag" to "service_role";

grant truncate on table "public"."collection_tag" to "service_role";

grant update on table "public"."collection_tag" to "service_role";

grant delete on table "public"."comment" to "anon";

grant insert on table "public"."comment" to "anon";

grant references on table "public"."comment" to "anon";

grant select on table "public"."comment" to "anon";

grant trigger on table "public"."comment" to "anon";

grant truncate on table "public"."comment" to "anon";

grant update on table "public"."comment" to "anon";

grant delete on table "public"."comment" to "authenticated";

grant insert on table "public"."comment" to "authenticated";

grant references on table "public"."comment" to "authenticated";

grant select on table "public"."comment" to "authenticated";

grant trigger on table "public"."comment" to "authenticated";

grant truncate on table "public"."comment" to "authenticated";

grant update on table "public"."comment" to "authenticated";

grant delete on table "public"."comment" to "service_role";

grant insert on table "public"."comment" to "service_role";

grant references on table "public"."comment" to "service_role";

grant select on table "public"."comment" to "service_role";

grant trigger on table "public"."comment" to "service_role";

grant truncate on table "public"."comment" to "service_role";

grant update on table "public"."comment" to "service_role";

grant delete on table "public"."comment_reaction" to "anon";

grant insert on table "public"."comment_reaction" to "anon";

grant references on table "public"."comment_reaction" to "anon";

grant select on table "public"."comment_reaction" to "anon";

grant trigger on table "public"."comment_reaction" to "anon";

grant truncate on table "public"."comment_reaction" to "anon";

grant update on table "public"."comment_reaction" to "anon";

grant delete on table "public"."comment_reaction" to "authenticated";

grant insert on table "public"."comment_reaction" to "authenticated";

grant references on table "public"."comment_reaction" to "authenticated";

grant select on table "public"."comment_reaction" to "authenticated";

grant trigger on table "public"."comment_reaction" to "authenticated";

grant truncate on table "public"."comment_reaction" to "authenticated";

grant update on table "public"."comment_reaction" to "authenticated";

grant delete on table "public"."comment_reaction" to "service_role";

grant insert on table "public"."comment_reaction" to "service_role";

grant references on table "public"."comment_reaction" to "service_role";

grant select on table "public"."comment_reaction" to "service_role";

grant trigger on table "public"."comment_reaction" to "service_role";

grant truncate on table "public"."comment_reaction" to "service_role";

grant update on table "public"."comment_reaction" to "service_role";

grant delete on table "public"."comment_report" to "anon";

grant insert on table "public"."comment_report" to "anon";

grant references on table "public"."comment_report" to "anon";

grant select on table "public"."comment_report" to "anon";

grant trigger on table "public"."comment_report" to "anon";

grant truncate on table "public"."comment_report" to "anon";

grant update on table "public"."comment_report" to "anon";

grant delete on table "public"."comment_report" to "authenticated";

grant insert on table "public"."comment_report" to "authenticated";

grant references on table "public"."comment_report" to "authenticated";

grant select on table "public"."comment_report" to "authenticated";

grant trigger on table "public"."comment_report" to "authenticated";

grant truncate on table "public"."comment_report" to "authenticated";

grant update on table "public"."comment_report" to "authenticated";

grant delete on table "public"."comment_report" to "service_role";

grant insert on table "public"."comment_report" to "service_role";

grant references on table "public"."comment_report" to "service_role";

grant select on table "public"."comment_report" to "service_role";

grant trigger on table "public"."comment_report" to "service_role";

grant truncate on table "public"."comment_report" to "service_role";

grant update on table "public"."comment_report" to "service_role";

grant delete on table "public"."contribution" to "anon";

grant insert on table "public"."contribution" to "anon";

grant references on table "public"."contribution" to "anon";

grant select on table "public"."contribution" to "anon";

grant trigger on table "public"."contribution" to "anon";

grant truncate on table "public"."contribution" to "anon";

grant update on table "public"."contribution" to "anon";

grant delete on table "public"."contribution" to "authenticated";

grant insert on table "public"."contribution" to "authenticated";

grant references on table "public"."contribution" to "authenticated";

grant select on table "public"."contribution" to "authenticated";

grant trigger on table "public"."contribution" to "authenticated";

grant truncate on table "public"."contribution" to "authenticated";

grant update on table "public"."contribution" to "authenticated";

grant delete on table "public"."contribution" to "service_role";

grant insert on table "public"."contribution" to "service_role";

grant references on table "public"."contribution" to "service_role";

grant select on table "public"."contribution" to "service_role";

grant trigger on table "public"."contribution" to "service_role";

grant truncate on table "public"."contribution" to "service_role";

grant update on table "public"."contribution" to "service_role";

grant delete on table "public"."creator" to "anon";

grant insert on table "public"."creator" to "anon";

grant references on table "public"."creator" to "anon";

grant select on table "public"."creator" to "anon";

grant trigger on table "public"."creator" to "anon";

grant truncate on table "public"."creator" to "anon";

grant update on table "public"."creator" to "anon";

grant delete on table "public"."creator" to "authenticated";

grant insert on table "public"."creator" to "authenticated";

grant references on table "public"."creator" to "authenticated";

grant select on table "public"."creator" to "authenticated";

grant trigger on table "public"."creator" to "authenticated";

grant truncate on table "public"."creator" to "authenticated";

grant update on table "public"."creator" to "authenticated";

grant delete on table "public"."creator" to "service_role";

grant insert on table "public"."creator" to "service_role";

grant references on table "public"."creator" to "service_role";

grant select on table "public"."creator" to "service_role";

grant trigger on table "public"."creator" to "service_role";

grant truncate on table "public"."creator" to "service_role";

grant update on table "public"."creator" to "service_role";

grant delete on table "public"."creator_comment" to "anon";

grant insert on table "public"."creator_comment" to "anon";

grant references on table "public"."creator_comment" to "anon";

grant select on table "public"."creator_comment" to "anon";

grant trigger on table "public"."creator_comment" to "anon";

grant truncate on table "public"."creator_comment" to "anon";

grant update on table "public"."creator_comment" to "anon";

grant delete on table "public"."creator_comment" to "authenticated";

grant insert on table "public"."creator_comment" to "authenticated";

grant references on table "public"."creator_comment" to "authenticated";

grant select on table "public"."creator_comment" to "authenticated";

grant trigger on table "public"."creator_comment" to "authenticated";

grant truncate on table "public"."creator_comment" to "authenticated";

grant update on table "public"."creator_comment" to "authenticated";

grant delete on table "public"."creator_comment" to "service_role";

grant insert on table "public"."creator_comment" to "service_role";

grant references on table "public"."creator_comment" to "service_role";

grant select on table "public"."creator_comment" to "service_role";

grant trigger on table "public"."creator_comment" to "service_role";

grant truncate on table "public"."creator_comment" to "service_role";

grant update on table "public"."creator_comment" to "service_role";

grant delete on table "public"."edition" to "anon";

grant insert on table "public"."edition" to "anon";

grant references on table "public"."edition" to "anon";

grant select on table "public"."edition" to "anon";

grant trigger on table "public"."edition" to "anon";

grant truncate on table "public"."edition" to "anon";

grant update on table "public"."edition" to "anon";

grant delete on table "public"."edition" to "authenticated";

grant insert on table "public"."edition" to "authenticated";

grant references on table "public"."edition" to "authenticated";

grant select on table "public"."edition" to "authenticated";

grant trigger on table "public"."edition" to "authenticated";

grant truncate on table "public"."edition" to "authenticated";

grant update on table "public"."edition" to "authenticated";

grant delete on table "public"."edition" to "service_role";

grant insert on table "public"."edition" to "service_role";

grant references on table "public"."edition" to "service_role";

grant select on table "public"."edition" to "service_role";

grant trigger on table "public"."edition" to "service_role";

grant truncate on table "public"."edition" to "service_role";

grant update on table "public"."edition" to "service_role";

grant delete on table "public"."image" to "anon";

grant insert on table "public"."image" to "anon";

grant references on table "public"."image" to "anon";

grant select on table "public"."image" to "anon";

grant trigger on table "public"."image" to "anon";

grant truncate on table "public"."image" to "anon";

grant update on table "public"."image" to "anon";

grant delete on table "public"."image" to "authenticated";

grant insert on table "public"."image" to "authenticated";

grant references on table "public"."image" to "authenticated";

grant select on table "public"."image" to "authenticated";

grant trigger on table "public"."image" to "authenticated";

grant truncate on table "public"."image" to "authenticated";

grant update on table "public"."image" to "authenticated";

grant delete on table "public"."image" to "service_role";

grant insert on table "public"."image" to "service_role";

grant references on table "public"."image" to "service_role";

grant select on table "public"."image" to "service_role";

grant trigger on table "public"."image" to "service_role";

grant truncate on table "public"."image" to "service_role";

grant update on table "public"."image" to "service_role";

grant delete on table "public"."image_creator" to "anon";

grant insert on table "public"."image_creator" to "anon";

grant references on table "public"."image_creator" to "anon";

grant select on table "public"."image_creator" to "anon";

grant trigger on table "public"."image_creator" to "anon";

grant truncate on table "public"."image_creator" to "anon";

grant update on table "public"."image_creator" to "anon";

grant delete on table "public"."image_creator" to "authenticated";

grant insert on table "public"."image_creator" to "authenticated";

grant references on table "public"."image_creator" to "authenticated";

grant select on table "public"."image_creator" to "authenticated";

grant trigger on table "public"."image_creator" to "authenticated";

grant truncate on table "public"."image_creator" to "authenticated";

grant update on table "public"."image_creator" to "authenticated";

grant delete on table "public"."image_creator" to "service_role";

grant insert on table "public"."image_creator" to "service_role";

grant references on table "public"."image_creator" to "service_role";

grant select on table "public"."image_creator" to "service_role";

grant trigger on table "public"."image_creator" to "service_role";

grant truncate on table "public"."image_creator" to "service_role";

grant update on table "public"."image_creator" to "service_role";

grant delete on table "public"."language" to "anon";

grant insert on table "public"."language" to "anon";

grant references on table "public"."language" to "anon";

grant select on table "public"."language" to "anon";

grant trigger on table "public"."language" to "anon";

grant truncate on table "public"."language" to "anon";

grant update on table "public"."language" to "anon";

grant delete on table "public"."language" to "authenticated";

grant insert on table "public"."language" to "authenticated";

grant references on table "public"."language" to "authenticated";

grant select on table "public"."language" to "authenticated";

grant trigger on table "public"."language" to "authenticated";

grant truncate on table "public"."language" to "authenticated";

grant update on table "public"."language" to "authenticated";

grant delete on table "public"."language" to "service_role";

grant insert on table "public"."language" to "service_role";

grant references on table "public"."language" to "service_role";

grant select on table "public"."language" to "service_role";

grant trigger on table "public"."language" to "service_role";

grant truncate on table "public"."language" to "service_role";

grant update on table "public"."language" to "service_role";

grant delete on table "public"."notification" to "anon";

grant insert on table "public"."notification" to "anon";

grant references on table "public"."notification" to "anon";

grant select on table "public"."notification" to "anon";

grant trigger on table "public"."notification" to "anon";

grant truncate on table "public"."notification" to "anon";

grant update on table "public"."notification" to "anon";

grant delete on table "public"."notification" to "authenticated";

grant insert on table "public"."notification" to "authenticated";

grant references on table "public"."notification" to "authenticated";

grant select on table "public"."notification" to "authenticated";

grant trigger on table "public"."notification" to "authenticated";

grant truncate on table "public"."notification" to "authenticated";

grant update on table "public"."notification" to "authenticated";

grant delete on table "public"."notification" to "service_role";

grant insert on table "public"."notification" to "service_role";

grant references on table "public"."notification" to "service_role";

grant select on table "public"."notification" to "service_role";

grant trigger on table "public"."notification" to "service_role";

grant truncate on table "public"."notification" to "service_role";

grant update on table "public"."notification" to "service_role";

grant delete on table "public"."notification_preference" to "anon";

grant insert on table "public"."notification_preference" to "anon";

grant references on table "public"."notification_preference" to "anon";

grant select on table "public"."notification_preference" to "anon";

grant trigger on table "public"."notification_preference" to "anon";

grant truncate on table "public"."notification_preference" to "anon";

grant update on table "public"."notification_preference" to "anon";

grant delete on table "public"."notification_preference" to "authenticated";

grant insert on table "public"."notification_preference" to "authenticated";

grant references on table "public"."notification_preference" to "authenticated";

grant select on table "public"."notification_preference" to "authenticated";

grant trigger on table "public"."notification_preference" to "authenticated";

grant truncate on table "public"."notification_preference" to "authenticated";

grant update on table "public"."notification_preference" to "authenticated";

grant delete on table "public"."notification_preference" to "service_role";

grant insert on table "public"."notification_preference" to "service_role";

grant references on table "public"."notification_preference" to "service_role";

grant select on table "public"."notification_preference" to "service_role";

grant trigger on table "public"."notification_preference" to "service_role";

grant truncate on table "public"."notification_preference" to "service_role";

grant update on table "public"."notification_preference" to "service_role";

grant delete on table "public"."publisher" to "anon";

grant insert on table "public"."publisher" to "anon";

grant references on table "public"."publisher" to "anon";

grant select on table "public"."publisher" to "anon";

grant trigger on table "public"."publisher" to "anon";

grant truncate on table "public"."publisher" to "anon";

grant update on table "public"."publisher" to "anon";

grant delete on table "public"."publisher" to "authenticated";

grant insert on table "public"."publisher" to "authenticated";

grant references on table "public"."publisher" to "authenticated";

grant select on table "public"."publisher" to "authenticated";

grant trigger on table "public"."publisher" to "authenticated";

grant truncate on table "public"."publisher" to "authenticated";

grant update on table "public"."publisher" to "authenticated";

grant delete on table "public"."publisher" to "service_role";

grant insert on table "public"."publisher" to "service_role";

grant references on table "public"."publisher" to "service_role";

grant select on table "public"."publisher" to "service_role";

grant trigger on table "public"."publisher" to "service_role";

grant truncate on table "public"."publisher" to "service_role";

grant update on table "public"."publisher" to "service_role";

grant delete on table "public"."publisher_comment" to "anon";

grant insert on table "public"."publisher_comment" to "anon";

grant references on table "public"."publisher_comment" to "anon";

grant select on table "public"."publisher_comment" to "anon";

grant trigger on table "public"."publisher_comment" to "anon";

grant truncate on table "public"."publisher_comment" to "anon";

grant update on table "public"."publisher_comment" to "anon";

grant delete on table "public"."publisher_comment" to "authenticated";

grant insert on table "public"."publisher_comment" to "authenticated";

grant references on table "public"."publisher_comment" to "authenticated";

grant select on table "public"."publisher_comment" to "authenticated";

grant trigger on table "public"."publisher_comment" to "authenticated";

grant truncate on table "public"."publisher_comment" to "authenticated";

grant update on table "public"."publisher_comment" to "authenticated";

grant delete on table "public"."publisher_comment" to "service_role";

grant insert on table "public"."publisher_comment" to "service_role";

grant references on table "public"."publisher_comment" to "service_role";

grant select on table "public"."publisher_comment" to "service_role";

grant trigger on table "public"."publisher_comment" to "service_role";

grant truncate on table "public"."publisher_comment" to "service_role";

grant update on table "public"."publisher_comment" to "service_role";

grant delete on table "public"."review" to "anon";

grant insert on table "public"."review" to "anon";

grant references on table "public"."review" to "anon";

grant select on table "public"."review" to "anon";

grant trigger on table "public"."review" to "anon";

grant truncate on table "public"."review" to "anon";

grant update on table "public"."review" to "anon";

grant delete on table "public"."review" to "authenticated";

grant insert on table "public"."review" to "authenticated";

grant references on table "public"."review" to "authenticated";

grant select on table "public"."review" to "authenticated";

grant trigger on table "public"."review" to "authenticated";

grant truncate on table "public"."review" to "authenticated";

grant update on table "public"."review" to "authenticated";

grant delete on table "public"."review" to "service_role";

grant insert on table "public"."review" to "service_role";

grant references on table "public"."review" to "service_role";

grant select on table "public"."review" to "service_role";

grant trigger on table "public"."review" to "service_role";

grant truncate on table "public"."review" to "service_role";

grant update on table "public"."review" to "service_role";

grant delete on table "public"."series" to "anon";

grant insert on table "public"."series" to "anon";

grant references on table "public"."series" to "anon";

grant select on table "public"."series" to "anon";

grant trigger on table "public"."series" to "anon";

grant truncate on table "public"."series" to "anon";

grant update on table "public"."series" to "anon";

grant delete on table "public"."series" to "authenticated";

grant insert on table "public"."series" to "authenticated";

grant references on table "public"."series" to "authenticated";

grant select on table "public"."series" to "authenticated";

grant trigger on table "public"."series" to "authenticated";

grant truncate on table "public"."series" to "authenticated";

grant update on table "public"."series" to "authenticated";

grant delete on table "public"."series" to "service_role";

grant insert on table "public"."series" to "service_role";

grant references on table "public"."series" to "service_role";

grant select on table "public"."series" to "service_role";

grant trigger on table "public"."series" to "service_role";

grant truncate on table "public"."series" to "service_role";

grant update on table "public"."series" to "service_role";

grant delete on table "public"."series_comment" to "anon";

grant insert on table "public"."series_comment" to "anon";

grant references on table "public"."series_comment" to "anon";

grant select on table "public"."series_comment" to "anon";

grant trigger on table "public"."series_comment" to "anon";

grant truncate on table "public"."series_comment" to "anon";

grant update on table "public"."series_comment" to "anon";

grant delete on table "public"."series_comment" to "authenticated";

grant insert on table "public"."series_comment" to "authenticated";

grant references on table "public"."series_comment" to "authenticated";

grant select on table "public"."series_comment" to "authenticated";

grant trigger on table "public"."series_comment" to "authenticated";

grant truncate on table "public"."series_comment" to "authenticated";

grant update on table "public"."series_comment" to "authenticated";

grant delete on table "public"."series_comment" to "service_role";

grant insert on table "public"."series_comment" to "service_role";

grant references on table "public"."series_comment" to "service_role";

grant select on table "public"."series_comment" to "service_role";

grant trigger on table "public"."series_comment" to "service_role";

grant truncate on table "public"."series_comment" to "service_role";

grant update on table "public"."series_comment" to "service_role";

grant delete on table "public"."series_entry" to "anon";

grant insert on table "public"."series_entry" to "anon";

grant references on table "public"."series_entry" to "anon";

grant select on table "public"."series_entry" to "anon";

grant trigger on table "public"."series_entry" to "anon";

grant truncate on table "public"."series_entry" to "anon";

grant update on table "public"."series_entry" to "anon";

grant delete on table "public"."series_entry" to "authenticated";

grant insert on table "public"."series_entry" to "authenticated";

grant references on table "public"."series_entry" to "authenticated";

grant select on table "public"."series_entry" to "authenticated";

grant trigger on table "public"."series_entry" to "authenticated";

grant truncate on table "public"."series_entry" to "authenticated";

grant update on table "public"."series_entry" to "authenticated";

grant delete on table "public"."series_entry" to "service_role";

grant insert on table "public"."series_entry" to "service_role";

grant references on table "public"."series_entry" to "service_role";

grant select on table "public"."series_entry" to "service_role";

grant trigger on table "public"."series_entry" to "service_role";

grant truncate on table "public"."series_entry" to "service_role";

grant update on table "public"."series_entry" to "service_role";

grant delete on table "public"."series_tag" to "anon";

grant insert on table "public"."series_tag" to "anon";

grant references on table "public"."series_tag" to "anon";

grant select on table "public"."series_tag" to "anon";

grant trigger on table "public"."series_tag" to "anon";

grant truncate on table "public"."series_tag" to "anon";

grant update on table "public"."series_tag" to "anon";

grant delete on table "public"."series_tag" to "authenticated";

grant insert on table "public"."series_tag" to "authenticated";

grant references on table "public"."series_tag" to "authenticated";

grant select on table "public"."series_tag" to "authenticated";

grant trigger on table "public"."series_tag" to "authenticated";

grant truncate on table "public"."series_tag" to "authenticated";

grant update on table "public"."series_tag" to "authenticated";

grant delete on table "public"."series_tag" to "service_role";

grant insert on table "public"."series_tag" to "service_role";

grant references on table "public"."series_tag" to "service_role";

grant select on table "public"."series_tag" to "service_role";

grant trigger on table "public"."series_tag" to "service_role";

grant truncate on table "public"."series_tag" to "service_role";

grant update on table "public"."series_tag" to "service_role";

grant delete on table "public"."settings_revision" to "anon";

grant insert on table "public"."settings_revision" to "anon";

grant references on table "public"."settings_revision" to "anon";

grant select on table "public"."settings_revision" to "anon";

grant trigger on table "public"."settings_revision" to "anon";

grant truncate on table "public"."settings_revision" to "anon";

grant update on table "public"."settings_revision" to "anon";

grant delete on table "public"."settings_revision" to "authenticated";

grant insert on table "public"."settings_revision" to "authenticated";

grant references on table "public"."settings_revision" to "authenticated";

grant select on table "public"."settings_revision" to "authenticated";

grant trigger on table "public"."settings_revision" to "authenticated";

grant truncate on table "public"."settings_revision" to "authenticated";

grant update on table "public"."settings_revision" to "authenticated";

grant delete on table "public"."settings_revision" to "service_role";

grant insert on table "public"."settings_revision" to "service_role";

grant references on table "public"."settings_revision" to "service_role";

grant select on table "public"."settings_revision" to "service_role";

grant trigger on table "public"."settings_revision" to "service_role";

grant truncate on table "public"."settings_revision" to "service_role";

grant update on table "public"."settings_revision" to "service_role";

grant delete on table "public"."tag" to "anon";

grant insert on table "public"."tag" to "anon";

grant references on table "public"."tag" to "anon";

grant select on table "public"."tag" to "anon";

grant trigger on table "public"."tag" to "anon";

grant truncate on table "public"."tag" to "anon";

grant update on table "public"."tag" to "anon";

grant delete on table "public"."tag" to "authenticated";

grant insert on table "public"."tag" to "authenticated";

grant references on table "public"."tag" to "authenticated";

grant select on table "public"."tag" to "authenticated";

grant trigger on table "public"."tag" to "authenticated";

grant truncate on table "public"."tag" to "authenticated";

grant update on table "public"."tag" to "authenticated";

grant delete on table "public"."tag" to "service_role";

grant insert on table "public"."tag" to "service_role";

grant references on table "public"."tag" to "service_role";

grant select on table "public"."tag" to "service_role";

grant trigger on table "public"."tag" to "service_role";

grant truncate on table "public"."tag" to "service_role";

grant update on table "public"."tag" to "service_role";

grant delete on table "public"."user_block" to "anon";

grant insert on table "public"."user_block" to "anon";

grant references on table "public"."user_block" to "anon";

grant select on table "public"."user_block" to "anon";

grant trigger on table "public"."user_block" to "anon";

grant truncate on table "public"."user_block" to "anon";

grant update on table "public"."user_block" to "anon";

grant delete on table "public"."user_block" to "authenticated";

grant insert on table "public"."user_block" to "authenticated";

grant references on table "public"."user_block" to "authenticated";

grant select on table "public"."user_block" to "authenticated";

grant trigger on table "public"."user_block" to "authenticated";

grant truncate on table "public"."user_block" to "authenticated";

grant update on table "public"."user_block" to "authenticated";

grant delete on table "public"."user_block" to "service_role";

grant insert on table "public"."user_block" to "service_role";

grant references on table "public"."user_block" to "service_role";

grant select on table "public"."user_block" to "service_role";

grant trigger on table "public"."user_block" to "service_role";

grant truncate on table "public"."user_block" to "service_role";

grant update on table "public"."user_block" to "service_role";

grant delete on table "public"."user_collection_favorite" to "anon";

grant insert on table "public"."user_collection_favorite" to "anon";

grant references on table "public"."user_collection_favorite" to "anon";

grant select on table "public"."user_collection_favorite" to "anon";

grant trigger on table "public"."user_collection_favorite" to "anon";

grant truncate on table "public"."user_collection_favorite" to "anon";

grant update on table "public"."user_collection_favorite" to "anon";

grant delete on table "public"."user_collection_favorite" to "authenticated";

grant insert on table "public"."user_collection_favorite" to "authenticated";

grant references on table "public"."user_collection_favorite" to "authenticated";

grant select on table "public"."user_collection_favorite" to "authenticated";

grant trigger on table "public"."user_collection_favorite" to "authenticated";

grant truncate on table "public"."user_collection_favorite" to "authenticated";

grant update on table "public"."user_collection_favorite" to "authenticated";

grant delete on table "public"."user_collection_favorite" to "service_role";

grant insert on table "public"."user_collection_favorite" to "service_role";

grant references on table "public"."user_collection_favorite" to "service_role";

grant select on table "public"."user_collection_favorite" to "service_role";

grant trigger on table "public"."user_collection_favorite" to "service_role";

grant truncate on table "public"."user_collection_favorite" to "service_role";

grant update on table "public"."user_collection_favorite" to "service_role";

grant delete on table "public"."user_creator_favorite" to "anon";

grant insert on table "public"."user_creator_favorite" to "anon";

grant references on table "public"."user_creator_favorite" to "anon";

grant select on table "public"."user_creator_favorite" to "anon";

grant trigger on table "public"."user_creator_favorite" to "anon";

grant truncate on table "public"."user_creator_favorite" to "anon";

grant update on table "public"."user_creator_favorite" to "anon";

grant delete on table "public"."user_creator_favorite" to "authenticated";

grant insert on table "public"."user_creator_favorite" to "authenticated";

grant references on table "public"."user_creator_favorite" to "authenticated";

grant select on table "public"."user_creator_favorite" to "authenticated";

grant trigger on table "public"."user_creator_favorite" to "authenticated";

grant truncate on table "public"."user_creator_favorite" to "authenticated";

grant update on table "public"."user_creator_favorite" to "authenticated";

grant delete on table "public"."user_creator_favorite" to "service_role";

grant insert on table "public"."user_creator_favorite" to "service_role";

grant references on table "public"."user_creator_favorite" to "service_role";

grant select on table "public"."user_creator_favorite" to "service_role";

grant trigger on table "public"."user_creator_favorite" to "service_role";

grant truncate on table "public"."user_creator_favorite" to "service_role";

grant update on table "public"."user_creator_favorite" to "service_role";

grant delete on table "public"."work" to "anon";

grant insert on table "public"."work" to "anon";

grant references on table "public"."work" to "anon";

grant select on table "public"."work" to "anon";

grant trigger on table "public"."work" to "anon";

grant truncate on table "public"."work" to "anon";

grant update on table "public"."work" to "anon";

grant delete on table "public"."work" to "authenticated";

grant insert on table "public"."work" to "authenticated";

grant references on table "public"."work" to "authenticated";

grant select on table "public"."work" to "authenticated";

grant trigger on table "public"."work" to "authenticated";

grant truncate on table "public"."work" to "authenticated";

grant update on table "public"."work" to "authenticated";

grant delete on table "public"."work" to "service_role";

grant insert on table "public"."work" to "service_role";

grant references on table "public"."work" to "service_role";

grant select on table "public"."work" to "service_role";

grant trigger on table "public"."work" to "service_role";

grant truncate on table "public"."work" to "service_role";

grant update on table "public"."work" to "service_role";

grant delete on table "public"."work_comment" to "anon";

grant insert on table "public"."work_comment" to "anon";

grant references on table "public"."work_comment" to "anon";

grant select on table "public"."work_comment" to "anon";

grant trigger on table "public"."work_comment" to "anon";

grant truncate on table "public"."work_comment" to "anon";

grant update on table "public"."work_comment" to "anon";

grant delete on table "public"."work_comment" to "authenticated";

grant insert on table "public"."work_comment" to "authenticated";

grant references on table "public"."work_comment" to "authenticated";

grant select on table "public"."work_comment" to "authenticated";

grant trigger on table "public"."work_comment" to "authenticated";

grant truncate on table "public"."work_comment" to "authenticated";

grant update on table "public"."work_comment" to "authenticated";

grant delete on table "public"."work_comment" to "service_role";

grant insert on table "public"."work_comment" to "service_role";

grant references on table "public"."work_comment" to "service_role";

grant select on table "public"."work_comment" to "service_role";

grant trigger on table "public"."work_comment" to "service_role";

grant truncate on table "public"."work_comment" to "service_role";

grant update on table "public"."work_comment" to "service_role";

grant delete on table "public"."work_rating" to "anon";

grant insert on table "public"."work_rating" to "anon";

grant references on table "public"."work_rating" to "anon";

grant select on table "public"."work_rating" to "anon";

grant trigger on table "public"."work_rating" to "anon";

grant truncate on table "public"."work_rating" to "anon";

grant update on table "public"."work_rating" to "anon";

grant delete on table "public"."work_rating" to "authenticated";

grant insert on table "public"."work_rating" to "authenticated";

grant references on table "public"."work_rating" to "authenticated";

grant select on table "public"."work_rating" to "authenticated";

grant trigger on table "public"."work_rating" to "authenticated";

grant truncate on table "public"."work_rating" to "authenticated";

grant update on table "public"."work_rating" to "authenticated";

grant delete on table "public"."work_rating" to "service_role";

grant insert on table "public"."work_rating" to "service_role";

grant references on table "public"."work_rating" to "service_role";

grant select on table "public"."work_rating" to "service_role";

grant trigger on table "public"."work_rating" to "service_role";

grant truncate on table "public"."work_rating" to "service_role";

grant update on table "public"."work_rating" to "service_role";

grant delete on table "public"."work_tag" to "anon";

grant insert on table "public"."work_tag" to "anon";

grant references on table "public"."work_tag" to "anon";

grant select on table "public"."work_tag" to "anon";

grant trigger on table "public"."work_tag" to "anon";

grant truncate on table "public"."work_tag" to "anon";

grant update on table "public"."work_tag" to "anon";

grant delete on table "public"."work_tag" to "authenticated";

grant insert on table "public"."work_tag" to "authenticated";

grant references on table "public"."work_tag" to "authenticated";

grant select on table "public"."work_tag" to "authenticated";

grant trigger on table "public"."work_tag" to "authenticated";

grant truncate on table "public"."work_tag" to "authenticated";

grant update on table "public"."work_tag" to "authenticated";

grant delete on table "public"."work_tag" to "service_role";

grant insert on table "public"."work_tag" to "service_role";

grant references on table "public"."work_tag" to "service_role";

grant select on table "public"."work_tag" to "service_role";

grant trigger on table "public"."work_tag" to "service_role";

grant truncate on table "public"."work_tag" to "service_role";

grant update on table "public"."work_tag" to "service_role";


  create policy "Allow authenticated users to add new Webauthn devices"
  on "authentication"."authenticator"
  as permissive
  for insert
  to authenticated
with check (true);



  create policy "Allow reading own authenticator details"
  on "authentication"."authenticator"
  as permissive
  for select
  to public
using (authentication.validate_authenticator(identifier));



  create policy "Allow creating challenges for all users"
  on "authentication"."challenge"
  as permissive
  for insert
  to public
with check (true);



  create policy "Allow reading own challenges"
  on "authentication"."challenge"
  as permissive
  for select
  to public
using (authentication.validate_challenge((challenge)::character varying));



  create policy "Enable read access for all users"
  on "public"."language"
  as permissive
  for select
  to public
using (true);



